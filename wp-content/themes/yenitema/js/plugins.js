/*! jQuery Timepicker Addon - v1.6.1 - 2015-11-14
 * http://trentrichardson.com/examples/timepicker
 * Copyright (c) 2015 Trent Richardson; Licensed MIT
*/

/*!
 * JSTORAGE
 * Simple local storage wrapper to save data on the browser side, supporting
 * all major browsers - IE6+, Firefox2+, Safari4+, Chrome4+ and Opera 10.5+
 * Author: Andris Reinman, andris.reinman@gmail.com
 * Project homepage: www.jstorage.info
 * Licensed under Unlicense <http://unlicense.org>
*/

 /*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
*/

 /*!
 * imagesLoaded PACKAGED v3.2.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
*/

/*!
 * EventEmitter v4.2.6 - git.io/ee
 * Oliver Caldwell
 * MIT license
*/

/*!
 *contextMenu.js v 1.4.1
 *Author: Sudhanshu Yadav
 *s-yadav.github.com
 *Copyright (c) 2013-2015 Sudhanshu Yadav.
 *Dual licensed under the MIT and GPL licenses
*/

 /*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 * Version: 1.3.8
*/

/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
 
/**
 * jQuery Wheel Color Picker
 * http://www.jar2.net/projects/jquery-wheelcolorpicker
 * Author : Fajar Chandra
 * Date   : 2017.02.07
 * Copyright © 2011-2017 Fajar Chandra. All rights reserved.
 * MIT License
 */

!function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-ui"],e):e(jQuery)}(function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.6.1"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",oneLine:!1,defaultValue:null,parse:"strict",afterInject:null},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(e,t){return $.isFunction(tp_inst._defaults.evnts.beforeShow)?tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst):void 0},onChangeMonthYear:function(e,t,i){$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,i,tp_inst)},onClose:function(e,t){tp_inst.timeDefined===!0&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}};for(i in overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||this._defaults[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&"undefined"==typeof $.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&"object"!=typeof timezoneList[0])for(;tzl>tzi;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField),tp_inst._defaults.altRedirectFocus===!0&&tp_inst.$altInput.css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),(0===tp_inst._defaults.minDate||0===tp_inst._defaults.minDateTime)&&(tp_inst._defaults.minDate=new Date),(0===tp_inst._defaults.maxDate||0===tp_inst._defaults.maxDateTime)&&(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=$.trim(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker(),this._afterInject()},_parseTime:function(e,t){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var n=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!n.timeObj)return!1;$.extend(this,n.timeObj)}catch(r){return $.timepicker.log("Error parsing the date/time string: "+r+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i),!1}return!0}var a=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return a?($.extend(this,a),!0):!1},_afterInject:function(){var e=this.inst.settings;$.isFunction(e.afterInject)&&e.afterInject.call(this)},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,i=this,n="",r="",a=null,s={},o={},l=null,u=0,c=0;if(0===e.find("div.ui-timepicker-div").length&&t.showTimepicker){var d=" ui_tpicker_unit_hide",h='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+(t.oneLine&&"select"===t.controlType?" ui-timepicker-oneLine":"")+'"><dl><dt class="ui_tpicker_time_label'+(t.showTime?"":d)+'">'+t.timeText+'</dt><dd class="ui_tpicker_time '+(t.showTime?"":d)+'"><input class="ui_tpicker_time_input" '+(t.timeInput?"":"disabled")+"/></dd>";for(u=0,c=this.units.length;c>u;u++){if(n=this.units[u],r=n.substr(0,1).toUpperCase()+n.substr(1),a=null!==t["show"+r]?t["show"+r]:this.support[n],s[n]=parseInt(t[n+"Max"]-(t[n+"Max"]-t[n+"Min"])%t["step"+r],10),o[n]=0,h+='<dt class="ui_tpicker_'+n+"_label"+(a?"":d)+'">'+t[n+"Text"]+'</dt><dd class="ui_tpicker_'+n+(a?"":d)+'"><div class="ui_tpicker_'+n+"_slider"+(a?"":d)+'"></div>',a&&t[n+"Grid"]>0){if(h+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"===n)for(var p=t[n+"Min"];p<=s[n];p+=parseInt(t[n+"Grid"],10)){o[n]++;var f=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:p},t);h+='<td data-for="'+n+'">'+f+"</td>"}else for(var m=t[n+"Min"];m<=s[n];m+=parseInt(t[n+"Grid"],10))o[n]++,h+='<td data-for="'+n+'">'+(10>m?"0":"")+m+"</td>";h+="</tr></table></div>"}h+="</dd>"}var g=null!==t.showTimezone?t.showTimezone:this.support.timezone;h+='<dt class="ui_tpicker_timezone_label'+(g?"":d)+'">'+t.timezoneText+"</dt>",h+='<dd class="ui_tpicker_timezone'+(g?"":d)+'"></dd>',h+="</dl></div>";var v=$(h);for(t.timeOnly===!0&&(v.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div></div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),u=0,c=i.units.length;c>u;u++)n=i.units[u],r=n.substr(0,1).toUpperCase()+n.substr(1),a=null!==t["show"+r]?t["show"+r]:this.support[n],i[n+"_slider"]=i.control.create(i,v.find(".ui_tpicker_"+n+"_slider"),n,i[n],t[n+"Min"],s[n],t["step"+r]),a&&t[n+"Grid"]>0&&(l=100*o[n]*t[n+"Grid"]/(s[n]-t[n+"Min"]),v.find(".ui_tpicker_"+n+" table").css({width:l+"%",marginLeft:t.isRTL?"0":l/(-2*o[n])+"%",marginRight:t.isRTL?l/(-2*o[n])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var t=$(this),r=t.html(),a=parseInt(r.replace(/[^0-9]/g),10),s=r.replace(/[^apm]/gi),o=t.data("for");"hour"===o&&(-1!==s.indexOf("p")&&12>a?a+=12:-1!==s.indexOf("a")&&12===a&&(a=0)),i.control.value(i,i[o+"_slider"],n,a),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/o[n]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=v.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e,t){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),"undefined"!=typeof this.timezone&&null!==this.timezone&&""!==this.timezone){var _=-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset();_===this.timezone?selectLocalTimezone(i):this.timezone_select.val(this.timezone)}else"undefined"!=typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.timezone):selectLocalTimezone(i);this.timezone_select.change(function(){i._onTimeChange(),i._onSelectHandler(),i._afterInject()});var w=e.find(".ui-datepicker-buttonpane");if(w.length?w.before(v):e.append(v),this.$timeObj=v.find(".ui_tpicker_time_input"),this.$timeObj.change(function(){var e=i.inst.settings.timeFormat,t=$.datepicker.parseTime(e,this.value),n=new Date;t?(n.setHours(t.hour),n.setMinutes(t.minute),n.setSeconds(t.second),$.datepicker._setTime(i.inst,n)):(this.value=i.formattedTime,this.blur())}),null!==this.inst){var b=this.timeDefined;this._onTimeChange(),this.timeDefined=b}if(this._defaults.addSliderAccess){var y=this._defaults.sliderAccessArgs,x=this._defaults.isRTL;y.isRTL=x,setTimeout(function(){if(0===v.find(".ui-slider-access").length){v.find(".ui-slider:visible").sliderAccess(y);var e=v.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&v.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),n=t.css(x?"marginRight":"marginLeft").toString().replace("%",""),r=i-e,a=n*r/i+"%",s={width:r,marginRight:0,marginLeft:0};s[x?"marginRight":"marginLeft"]=a,t.css(s)})}},10)}i._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,n=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&n){var r=$.datepicker._get(e,"minDateTime"),a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal||null===this.microsecMinOriginal)&&(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin,this.microsecMinOriginal=i.microsecMin),e.settings.timeOnly||a.getTime()===n.getTime()?(this._defaults.hourMin=r.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=r.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=r.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=r.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=r.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&n){var s=$.datepicker._get(e,"maxDateTime"),o=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0);(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal||null===this.millisecMaxOriginal)&&(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax,this.microsecMaxOriginal=i.microsecMax),e.settings.timeOnly||o.getTime()===n.getTime()?(this._defaults.hourMax=s.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=s.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=s.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=s.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=s.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(null!==e.settings.minTime){var l=new Date("01/01/1970 "+e.settings.minTime);this.hour<l.getHours()?(this.hour=this._defaults.hourMin=l.getHours(),this.minute=this._defaults.minuteMin=l.getMinutes()):this.hour===l.getHours()&&this.minute<l.getMinutes()?this.minute=this._defaults.minuteMin=l.getMinutes():this._defaults.hourMin<l.getHours()?(this._defaults.hourMin=l.getHours(),this._defaults.minuteMin=l.getMinutes()):this._defaults.hourMin===l.getHours()===this.hour&&this._defaults.minuteMin<l.getMinutes()?this._defaults.minuteMin=l.getMinutes():this._defaults.minuteMin=0}if(null!==e.settings.maxTime){var u=new Date("01/01/1970 "+e.settings.maxTime);this.hour>u.getHours()?(this.hour=this._defaults.hourMax=u.getHours(),this.minute=this._defaults.minuteMax=u.getMinutes()):this.hour===u.getHours()&&this.minute>u.getMinutes()?this.minute=this._defaults.minuteMax=u.getMinutes():this._defaults.hourMax>u.getHours()?(this._defaults.hourMax=u.getHours(),this._defaults.minuteMax=u.getMinutes()):this._defaults.hourMax===u.getHours()===this.hour&&this._defaults.minuteMax>u.getMinutes()?this._defaults.minuteMax=u.getMinutes():this._defaults.minuteMax=59}if(void 0!==t&&t===!0){var c=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),d=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),h=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),p=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),f=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:c,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:d,step:this._defaults.stepMinute}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:h,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:p,step:this._defaults.stepMillisec}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:f,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var e=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):!1,t=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,i=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,n=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,r=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):!1,a=this.timezone_select?this.timezone_select.val():!1,s=this._defaults,o=s.pickerTimeFormat||s.timeFormat,l=s.pickerTimeSuffix||s.timeSuffix;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof i&&(i=!1),"object"==typeof n&&(n=!1),"object"==typeof r&&(r=!1),"object"==typeof a&&(a=!1),e!==!1&&(e=parseInt(e,10)),t!==!1&&(t=parseInt(t,10)),i!==!1&&(i=parseInt(i,10)),n!==!1&&(n=parseInt(n,10)),r!==!1&&(r=parseInt(r,10)),a!==!1&&(a=a.toString());var u=s[12>e?"amNames":"pmNames"][0],c=e!==parseInt(this.hour,10)||t!==parseInt(this.minute,10)||i!==parseInt(this.second,10)||n!==parseInt(this.millisec,10)||r!==parseInt(this.microsec,10)||this.ampm.length>0&&12>e!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&a!==this.timezone.toString();if(c&&(e!==!1&&(this.hour=e),t!==!1&&(this.minute=t),i!==!1&&(this.second=i),n!==!1&&(this.millisec=n),r!==!1&&(this.microsec=r),a!==!1&&(this.timezone=a),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=u),this.formattedTime=$.datepicker.formatTime(s.timeFormat,this,s),this.$timeObj){var d=this.$timeObj[0].selectionStart,h=this.$timeObj[0].selectionEnd;o===s.timeFormat?this.$timeObj.val(this.formattedTime+l):this.$timeObj.val($.datepicker.formatTime(o,this,s)+l),this.$timeObj[0].setSelectionRange(d,h)}this.timeDefined=!0,c&&this._updateDateTime()}},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){e=this.inst||e;var t=e.currentYear>0?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=$.datepicker._daylightSavingAdjust(t),n=$.datepicker._get(e,"dateFormat"),r=$.datepicker._getFormatConfig(e),a=null!==i&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(n,null===i?new Date:i,r);var s=this.formattedDate;if(""===e.lastVal&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!1?s=this.formattedTime:(this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||a)||this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!0)&&(s+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=s,this._defaults.showTimepicker)if(this.$altInput&&this._defaults.timeOnly===!1&&this._defaults.altFieldTimeOnly===!0)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(s);var o="",l=null!==this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,u=null!==this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(o=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===i?new Date:i,r):this.formattedDate,o&&(o+=l)),o+=null!==this._defaults.altTimeFormat?$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+u:this.formattedTime+u,this.$altInput.val(o)}else this.$input.val(s);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!==e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(i){$.timepicker.log(i)}}},_controls:{slider:{create:function(e,t,i,n,r,a,s){var o=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:o?-1*n:n,min:o?-1*a:r,max:o?-1*r:a,step:s,slide:function(t,n){e.control.value(e,$(this),i,o?-1*n.value:n.value),e._onTimeChange()},stop:function(t,i){e._onSelectHandler()}})},options:function(e,t,i,n,r){if(e._defaults.isRTL){if("string"==typeof n)return"min"===n||"max"===n?void 0!==r?t.slider(n,-1*r):Math.abs(t.slider(n)):t.slider(n);var a=n.min,s=n.max;return n.min=n.max=null,void 0!==a&&(n.max=-1*a),void 0!==s&&(n.min=-1*s),t.slider(n)}return"string"==typeof n&&void 0!==r?t.slider(n,r):t.slider(n)},value:function(e,t,i,n){return e._defaults.isRTL?void 0!==n?t.slider("value",-1*n):Math.abs(t.slider("value")):void 0!==n?t.slider("value",n):t.slider("value")}},select:{create:function(e,t,i,n,r,a,s){for(var o='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+i+'" data-min="'+r+'" data-max="'+a+'" data-step="'+s+'">',l=e._defaults.pickerTimeFormat||e._defaults.timeFormat,u=r;a>=u;u+=s)o+='<option value="'+u+'"'+(u===n?" selected":"")+">",o+="hour"===i?$.datepicker.formatTime($.trim(l.replace(/[^ht ]/gi,"")),{hour:u},e._defaults):"millisec"===i||"microsec"===i||u>=10?u:"0"+u.toString(),o+="</option>";return o+="</select>",t.children("select").remove(),$(o).appendTo(t).change(function(t){e._onTimeChange(),e._onSelectHandler(),e._afterInject()}),t},options:function(e,t,i,n,r){var a={},s=t.children("select");if("string"==typeof n){if(void 0===r)return s.data(n);a[n]=r}else a=n;return e.control.create(e,t,s.data("unit"),s.val(),a.min>=0?a.min:s.data("min"),a.max||s.data("max"),a.step||s.data("step"))},value:function(e,t,i,n){var r=t.children("select");return void 0!==n?r.val(n):r.val()}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){e=e||{};var t=arguments;return"string"==typeof e?"getDate"===e||"option"===e&&2===t.length&&"string"==typeof t[1]?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,i,n,r){var a=parseDateTimeInternal(e,t,i,n,r);if(a.timeObj){var s=a.timeObj;a.date.setHours(s.hour,s.minute,s.second,s.millisec),a.date.setMicroseconds(s.microsec)}return a.date},$.datepicker.parseTime=function(e,t,i){var n=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),r=(-1!==e.replace(/\'.*?\'/g,"").indexOf("Z"),function(e,t,i){var n,r=function(e,t){var i=[];return e&&$.merge(i,e),t&&$.merge(i,t),i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+i.join("|")+")?"},a=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),i={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(t)for(var n=0;n<t.length;n++)-1===i[t[n].toString().charAt(0)]&&(i[t[n].toString().charAt(0)]=n+1);return i},s="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"m":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"s":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"l":return"(\\d?\\d?\\d)";case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return r(i.amNames,i.pmNames);default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",o=a(e),l="";n=t.match(new RegExp(s,"i"));var u={hour:0,minute:0,second:0,millisec:0,microsec:0};return n?(-1!==o.t&&(void 0===n[o.t]||0===n[o.t].length?(l="",u.ampm=""):(l=-1!==$.inArray(n[o.t].toUpperCase(),$.map(i.amNames,function(e,t){return e.toUpperCase()}))?"AM":"PM",u.ampm=i["AM"===l?"amNames":"pmNames"][0])),-1!==o.h&&("AM"===l&&"12"===n[o.h]?u.hour=0:"PM"===l&&"12"!==n[o.h]?u.hour=parseInt(n[o.h],10)+12:u.hour=Number(n[o.h])),-1!==o.m&&(u.minute=Number(n[o.m])),-1!==o.s&&(u.second=Number(n[o.s])),-1!==o.l&&(u.millisec=Number(n[o.l])),-1!==o.c&&(u.microsec=Number(n[o.c])),-1!==o.z&&void 0!==n[o.z]&&(u.timezone=$.timepicker.timezoneOffsetNumber(n[o.z])),u):!1}),a=function(e,t,i){try{var n=new Date("2012-01-01 "+t);if(isNaN(n.getTime())&&(n=new Date("2012-01-01T"+t),isNaN(n.getTime())&&(n=new Date("01/01/2012 "+t),isNaN(n.getTime()))))throw"Unable to parse time with native Date: "+t;return{hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisec:n.getMilliseconds(),microsec:n.getMicroseconds(),timezone:-1*n.getTimezoneOffset()}}catch(a){try{return r(e,t,i)}catch(s){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return!1};return"function"==typeof n.parse?n.parse(e,t,n):"loose"===n.parse?a(e,t,n):r(e,t,n)},$.datepicker.formatTime=function(e,t,i){i=i||{},i=$.extend({},$.timepicker._defaults,i),t=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},t);var n=e,r=i.amNames[0],a=parseInt(t.hour,10);return a>11&&(r=i.pmNames[0]),n=n.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){switch(e){case"HH":return("0"+a).slice(-2);case"H":return a;case"hh":return("0"+convert24to12(a)).slice(-2);case"h":return convert24to12(a);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"c":return("00"+t.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!0);case"T":return r.charAt(0).toUpperCase();case"TT":return r.toUpperCase();case"t":return r.charAt(0).toLowerCase();case"tt":return r.toLowerCase();default:return e.replace(/'/g,"")}})},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var i,n=this._getInst($(e)[0]),r=this._get(n,"timepicker");r&&n.settings.showTimepicker?(r._limitMinMaxDateTime(n,!0),i=n.inline,n.inline=n.stay_open=!0,this._base_selectDate(e,t),n.inline=i,n.stay_open=!1,this._notifyChange(n),this._updateDatepicker(n)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==t||"boolean"==typeof e.stay_open&&e.stay_open!==!1)){this._base_updateDatepicker(e);
var i=this._get(e,"timepicker");i&&i._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&$.datepicker._get(t,"constrainInput")){var n=i.support.ampm,r=null!==i._defaults.showTimezone?i._defaults.showTimezone:i.support.timezone,a=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),s=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,n?"APM":"").replace(/Tt/g,n?"AaPpMm":"").replace(/tT/g,n?"AaPpMm":"").replace(/T/g,n?"AP":"").replace(/tt/g,n?"apm":"").replace(/t/g,n?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(r?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+a,o=String.fromCharCode(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||" ">o||!a||s.indexOf(o)>-1}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var i=t._defaults.altField;if(i){var n=(t._defaults.altFormat||t._defaults.dateFormat,this._getDate(e)),r=$.datepicker._getFormatConfig(e),a="",s=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,o=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,l=null!==t._defaults.altTimeFormat?t._defaults.altTimeFormat:t._defaults.timeFormat;a+=$.datepicker.formatTime(l,t,t._defaults)+o,t._defaults.timeOnly||t._defaults.altFieldTimeOnly||null===n||(a=t._defaults.altFormat?$.datepicker.formatDate(t._defaults.altFormat,n,r)+s+a:t.formattedDate+s+a),$(i).val(e.input.val()?a:"")}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&i._defaults.timeOnly&&t.input.val()!==t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(n){$.timepicker.log(n)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]);this._base_gotoToday(e);var i=this._get(t,"timepicker"),n=$.timepicker.timezoneOffsetNumber(i.timezone),r=new Date;r.setMinutes(r.getMinutes()+r.getTimezoneOffset()+n),this._setTime(t,r),this._setDate(t,r),i._onSelectHandler()},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!1,i._defaults.showTimepicker=!1,i._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!0,i._defaults.showTimepicker=!0,i._addTimePicker(t),i._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var n=i._defaults;i.hour=t?t.getHours():n.hour,i.minute=t?t.getMinutes():n.minute,i.second=t?t.getSeconds():n.second,i.millisec=t?t.getMilliseconds():n.millisec,i.microsec=t?t.getMicroseconds():n.microsec,i._limitMinMaxDateTime(e,!0),i._onTimeChange(),i._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,i){var n=this._getInst(e);if(n){var r=this._get(n,"timepicker");if(r){this._setDateFromField(n);var a;t&&("string"==typeof t?(r._parseTime(t,i),a=new Date,a.setHours(r.hour,r.minute,r.second,r.millisec),a.setMicroseconds(r.microsec)):(a=new Date(t.getTime()),a.setMicroseconds(t.getMicroseconds())),"Invalid Date"===a.toString()&&(a=void 0),this._setTime(n,a))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e),n=t;if(i){"string"==typeof t&&(n=new Date(t),n.getTime()||(this._base_setDateDatepicker.apply(this,arguments),n=$(e).datepicker("getDate")));var r,a=this._get(i,"timepicker");n instanceof Date?(r=new Date(n.getTime()),r.setMicroseconds(n.getMicroseconds())):r=n,a&&r&&(a.support.timezone||null!==a._defaults.timezone||(a.timezone=-1*r.getTimezoneOffset()),n=$.timepicker.timezoneAdjust(n,a.timezone),r=$.timepicker.timezoneAdjust(r,a.timezone)),this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,r,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var n=this._get(i,"timepicker");if(n){void 0===i.lastVal&&this._setDateFromField(i,t);var r=this._getDate(i),a=$.trim(n.$altInput&&n._defaults.altFieldTimeOnly?n.$input.val()+" "+n.$altInput.val():n.$input.val());return r&&n._parseTime(a,!i.settings.timeOnly)&&(r.setHours(n.hour,n.minute,n.second,n.millisec),r.setMicroseconds(n.microsec),null!=n.timezone&&(n.support.timezone||null!==n._defaults.timezone||(n.timezone=-1*r.getTimezoneOffset()),r=$.timepicker.timezoneAdjust(r,n.timezone))),r}return this._base_getDateDatepicker(e,t)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,i){var n;try{n=this._base_parseDate(e,t,i)}catch(r){if(!(r.indexOf(":")>=0))throw r;n=this._base_parseDate(e,t.substring(0,t.length-(r.length-r.indexOf(":")-2)),i),$.timepicker.log("Error parsing the date string: "+r+"\ndate string = "+t+"\ndate format = "+e)}return n},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e,t,i,n){var r=this._get(e,"timepicker");return r?(r._updateDateTime(e),r.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,i){var n,r=this._getInst(e);if(!r)return null;var a=this._get(r,"timepicker");if(a){var s,o,l,u,c=null,d=null,h=null,p=a._defaults.evnts,f={};if("string"==typeof t){if("minDate"===t||"minDateTime"===t)c=i;else if("maxDate"===t||"maxDateTime"===t)d=i;else if("onSelect"===t)h=i;else if(p.hasOwnProperty(t)){if("undefined"==typeof i)return p[t];f[t]=i,n={}}}else if("object"==typeof t){t.minDate?c=t.minDate:t.minDateTime?c=t.minDateTime:t.maxDate?d=t.maxDate:t.maxDateTime&&(d=t.maxDateTime);for(s in p)p.hasOwnProperty(s)&&t[s]&&(f[s]=t[s])}for(s in f)f.hasOwnProperty(s)&&(p[s]=f[s],n||(n=$.extend({},t)),delete n[s]);if(n&&isEmptyObject(n))return;if(c?(c=0===c?new Date:new Date(c),a._defaults.minDate=c,a._defaults.minDateTime=c):d?(d=0===d?new Date:new Date(d),a._defaults.maxDate=d,a._defaults.maxDateTime=d):h&&(a._defaults.onSelect=h),c||d)return u=$(e),l=u.datetimepicker("getDate"),o=this._base_optionDatepicker.call($.datepicker,e,n||t,i),u.datetimepicker("setDate",l),o}return void 0===i?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,n||t,i)};var isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},extendRemove=function(e,t){$.extend(e,t);for(var i in t)(null===t[i]||void 0===t[i])&&(e[i]=t[i]);return e},detectSupport=function(e){var t=e.replace(/'.*?'/g,"").toLowerCase(),i=function(e,t){return-1!==e.indexOf(t)?!0:!1};return{hour:i(t,"h"),minute:i(t,"m"),second:i(t,"s"),millisec:i(t,"l"),microsec:i(t,"c"),timezone:i(t,"z"),ampm:i(t,"t")&&i(e,"h"),iso8601:i(e,"Z")}},convert24to12=function(e){return e%=12,0===e&&(e=12),String(e)},computeEffectiveSetting=function(e,t){return e&&e[t]?e[t]:$.timepicker._defaults[t]},splitDateTime=function(e,t){var i=computeEffectiveSetting(t,"separator"),n=computeEffectiveSetting(t,"timeFormat"),r=n.split(i),a=r.length,s=e.split(i),o=s.length;return o>1?{dateString:s.splice(0,o-a).join(i),timeString:s.splice(0,a).join(i)}:{dateString:e,timeString:""}},parseDateTimeInternal=function(e,t,i,n,r){var a,s,o;if(s=splitDateTime(i,r),a=$.datepicker._base_parseDate(e,s.dateString,n),""===s.timeString)return{date:a};if(o=$.datepicker.parseTime(t,s.timeString,r),!o)throw"Wrong time format";return{date:a,timeObj:o}},selectLocalTimezone=function(e,t){if(e&&e.timezone_select){var i=t||new Date;e.timezone_select.val(-i.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(e,t){if(isNaN(e)||e>840||-720>e)return e;var i=e,n=i%60,r=(i-n)/60,a=t?":":"",s=(i>=0?"+":"-")+("0"+Math.abs(r)).slice(-2)+a+("0"+Math.abs(n)).slice(-2);return"+00:00"===s?"Z":s},$.timepicker.timezoneOffsetNumber=function(e){var t=e.toString().replace(":","");return"Z"===t.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(t)?("-"===t.substr(0,1)?-1:1)*(60*parseInt(t.substr(1,2),10)+parseInt(t.substr(3,2),10)):e},$.timepicker.timezoneAdjust=function(e,t){var i=$.timepicker.timezoneOffsetNumber(t);return isNaN(i)||e.setMinutes(e.getMinutes()+-e.getTimezoneOffset()-i),e},$.timepicker.timeRange=function(e,t,i){return $.timepicker.handleRange("timepicker",e,t,i)},$.timepicker.datetimeRange=function(e,t,i){$.timepicker.handleRange("datetimepicker",e,t,i)},$.timepicker.dateRange=function(e,t,i){$.timepicker.handleRange("datepicker",e,t,i)},$.timepicker.handleRange=function(e,t,i,n){function r(r,a){var s=t[e]("getDate"),o=i[e]("getDate"),l=r[e]("getDate");if(null!==s){var u=new Date(s.getTime()),c=new Date(s.getTime());u.setMilliseconds(u.getMilliseconds()+n.minInterval),c.setMilliseconds(c.getMilliseconds()+n.maxInterval),n.minInterval>0&&u>o?i[e]("setDate",u):n.maxInterval>0&&o>c?i[e]("setDate",c):s>o&&a[e]("setDate",l)}}function a(t,i,r){if(t.val()){var a=t[e].call(t,"getDate");null!==a&&n.minInterval>0&&("minDate"===r&&a.setMilliseconds(a.getMilliseconds()+n.minInterval),"maxDate"===r&&a.setMilliseconds(a.getMilliseconds()-n.minInterval)),a.getTime&&i[e].call(i,"option",r,a)}}n=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},n);var s=!1;return"timepicker"===e&&(s=!0,e="datetimepicker"),$.fn[e].call(t,$.extend({timeOnly:s,onClose:function(e,t){r($(this),i)},onSelect:function(e){a($(this),i,"minDate")}},n,n.start)),$.fn[e].call(i,$.extend({timeOnly:s,onClose:function(e,i){r($(this),t)},onSelect:function(e){a($(this),t,"maxDate")}},n,n.end)),r(t,i),a(t,i,"minDate"),a(i,t,"maxDate"),$([t.get(0),i.get(0)])},$.timepicker.log=function(){window.console&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+Math.floor(e/1e3)),this.microseconds=e%1e3,this}),$.timepicker.version="1.6.1"}}),function(e){"use strict";function t(){}function i(){try{return document.activeElement}catch(e){}}function n(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return!0;return!1}function r(e,t,i){return e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):void 0}function a(e,t){var i;e.createTextRange?(i=e.createTextRange(),i.move("character",t),i.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))}function s(e,t){try{return e.type=t,!0}catch(i){return!1}}function o(e,t){if(e&&e.getAttribute(j))t(e);else for(var i,n=e?e.getElementsByTagName("input"):L,r=e?e.getElementsByTagName("textarea"):z,a=n?n.length:0,s=r?r.length:0,o=a+s,l=0;o>l;l++)i=a>l?n[l]:r[l-a],t(i)}function l(e){o(e,c)}function u(e){o(e,d)}function c(e,t){var i=!!t&&e.value!==t,n=e.value===e.getAttribute(j);if((i||n)&&"true"===e.getAttribute(P)){e.removeAttribute(P),e.value=e.value.replace(e.getAttribute(j),""),e.className=e.className.replace(T,"");var r=e.getAttribute(I);parseInt(r,10)>=0&&(e.setAttribute("maxLength",r),e.removeAttribute(I));var a=e.getAttribute(S);return a&&(e.type=a),!0}return!1}function d(e){var t=e.getAttribute(j);if(""===e.value&&t){e.setAttribute(P,"true"),e.value=t,e.className+=" "+k;var i=e.getAttribute(I);i||(e.setAttribute(I,e.maxLength),e.removeAttribute("maxLength"));var n=e.getAttribute(S);return n?e.type="text":"password"===e.type&&s(e,"text")&&e.setAttribute(S,"password"),!0}return!1}function h(e){return function(){H&&e.value===e.getAttribute(j)&&"true"===e.getAttribute(P)?a(e,0):c(e)}}function p(e){return function(){d(e)}}function f(e){return function(){l(e)}}function m(e){return function(t){return y=e.value,"true"===e.getAttribute(P)&&y===e.getAttribute(j)&&n(C,t.keyCode)?(t.preventDefault&&t.preventDefault(),!1):void 0}}function g(e){return function(){c(e,y),""===e.value&&(e.blur(),a(e,0))}}function v(e){return function(){e===i()&&e.value===e.getAttribute(j)&&"true"===e.getAttribute(P)&&a(e,0)}}function _(e){var t=e.form;t&&"string"==typeof t&&(t=document.getElementById(t),t.getAttribute(D)||(r(t,"submit",f(t)),t.setAttribute(D,"true"))),r(e,"focus",h(e)),r(e,"blur",p(e)),H&&(r(e,"keydown",m(e)),r(e,"keyup",g(e)),r(e,"click",v(e))),e.setAttribute(O,"true"),e.setAttribute(j,V),(H||e!==i())&&d(e)}var w=document.createElement("input"),b=void 0!==w.placeholder;if(e.Placeholders={nativeSupport:b,disable:b?t:l,enable:b?t:u},!b){var y,x=["text","search","url","tel","email","password","number","textarea"],C=[27,33,34,35,36,37,38,39,40,8,46],M="#ccc",k="placeholdersjs",T=new RegExp("(?:^|\\s)"+k+"(?!\\S)"),j="data-placeholder-value",P="data-placeholder-active",S="data-placeholder-type",D="data-placeholder-submit",O="data-placeholder-bound",$="data-placeholder-focus",W="data-placeholder-live",I="data-placeholder-maxlength",A=100,Q=document.getElementsByTagName("head")[0],E=document.documentElement,N=e.Placeholders,L=document.getElementsByTagName("input"),z=document.getElementsByTagName("textarea"),H="false"===E.getAttribute($),R="false"!==E.getAttribute(W),F=document.createElement("style");F.type="text/css";var B=document.createTextNode("."+k+" {color:"+M+";}");F.styleSheet?F.styleSheet.cssText=B.nodeValue:F.appendChild(B),Q.insertBefore(F,Q.firstChild);for(var V,G,X=0,q=L.length+z.length;q>X;X++)G=X<L.length?L[X]:z[X-L.length],V=G.attributes.placeholder,V&&(V=V.nodeValue,V&&n(x,G.type)&&_(G));var U=setInterval(function(){for(var e=0,t=L.length+z.length;t>e;e++)G=e<L.length?L[e]:z[e-L.length],V=G.attributes.placeholder,V?(V=V.nodeValue,V&&n(x,G.type)&&(G.getAttribute(O)||_(G),(V!==G.getAttribute(j)||"password"===G.type&&!G.getAttribute(S))&&("password"===G.type&&!G.getAttribute(S)&&s(G,"text")&&G.setAttribute(S,"password"),G.value===G.getAttribute(j)&&(G.value=V),G.setAttribute(j,V)))):G.getAttribute(P)&&(c(G),G.removeAttribute(j));R||clearInterval(U)},A);r(e,"beforeunload",function(){N.disable()})}}(this),function(){"use strict";function e(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(t){}if(e)try{window.localStorage&&(y=window.localStorage,M="localStorage",j=y.jStorage_update)}catch(r){}else if("globalStorage"in window)try{window.globalStorage&&(y="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],M="globalStorage",j=y.jStorage_update)}catch(a){}else{if(x=document.createElement("link"),!x.addBehavior)return void(x=null);x.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(x);try{x.load("jStorage")}catch(s){x.setAttribute("jStorage","{}"),x.save("jStorage"),x.load("jStorage")}var l="{}";try{l=x.getAttribute("jStorage")}catch(u){}try{j=x.getAttribute("jStorage_update")}catch(h){}y.jStorage=l,M="userDataBehavior"}o(),c(),i(),d(),"addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&n()},!1)}function t(){var e="{}";if("userDataBehavior"==M){x.load("jStorage");try{e=x.getAttribute("jStorage")}catch(t){}try{j=x.getAttribute("jStorage_update")}catch(i){}y.jStorage=e}o(),c(),d()}function i(){"localStorage"==M||"globalStorage"==M?"addEventListener"in window?window.addEventListener("storage",n,!1):document.attachEvent("onstorage",n):"userDataBehavior"==M&&setInterval(n,1e3)}function n(){var e;clearTimeout(T),T=setTimeout(function(){if("localStorage"==M||"globalStorage"==M)e=y.jStorage_update;else if("userDataBehavior"==M){x.load("jStorage");try{e=x.getAttribute("jStorage_update")}catch(t){}}e&&e!=j&&(j=e,r())},25)}function r(){var e,i=_.parse(_.stringify(b.__jstorage_meta.CRC32));t(),e=_.parse(_.stringify(b.__jstorage_meta.CRC32));var n,r=[],s=[];for(n in i)if(i.hasOwnProperty(n)){if(!e[n]){s.push(n);continue}i[n]!=e[n]&&"2."==String(i[n]).substr(0,2)&&r.push(n)}for(n in e)e.hasOwnProperty(n)&&(i[n]||r.push(n));a(r,"updated"),a(s,"deleted")}function a(e,t){e=[].concat(e||[]);var i,n,r,a;if("flushed"==t){e=[];for(var s in k)k.hasOwnProperty(s)&&e.push(s);t="deleted"}for(i=0,r=e.length;r>i;i++){if(k[e[i]])for(n=0,a=k[e[i]].length;a>n;n++)k[e[i]][n](e[i],t);if(k["*"])for(n=0,a=k["*"].length;a>n;n++)k["*"][n](e[i],t)}}function s(){var e=(+new Date).toString();if("localStorage"==M||"globalStorage"==M)try{y.jStorage_update=e}catch(t){M=!1}else"userDataBehavior"==M&&(x.setAttribute("jStorage_update",e),x.save("jStorage"));n()}function o(){if(y.jStorage)try{b=_.parse(String(y.jStorage))}catch(e){y.jStorage="{}"}else y.jStorage="{}";C=y.jStorage?String(y.jStorage).length:0,b.__jstorage_meta||(b.__jstorage_meta={}),b.__jstorage_meta.CRC32||(b.__jstorage_meta.CRC32={})}function l(){p();try{y.jStorage=_.stringify(b),x&&(x.setAttribute("jStorage",y.jStorage),x.save("jStorage")),C=y.jStorage?String(y.jStorage).length:0}catch(e){}}function u(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==e)throw new TypeError("Reserved key name");return!0}function c(){var e,t,i,n,r=1/0,o=!1,u=[];if(clearTimeout(w),b.__jstorage_meta&&"object"==typeof b.__jstorage_meta.TTL){e=+new Date,i=b.__jstorage_meta.TTL,n=b.__jstorage_meta.CRC32;for(t in i)i.hasOwnProperty(t)&&(i[t]<=e?(delete i[t],delete n[t],delete b[t],o=!0,u.push(t)):i[t]<r&&(r=i[t]));r!=1/0&&(w=setTimeout(c,Math.min(r-e,2147483647))),o&&(l(),s(),a(u,"deleted"))}}function d(){var e,t;if(b.__jstorage_meta.PubSub){var i,n=S,r=[];for(e=t=b.__jstorage_meta.PubSub.length-1;e>=0;e--)i=b.__jstorage_meta.PubSub[e],i[0]>S&&(n=i[0],r.unshift(i));for(e=r.length-1;e>=0;e--)h(r[e][1],r[e][2]);S=n}}function h(e,t){if(P[e])for(var i=0,n=P[e].length;n>i;i++)try{P[e][i](e,_.parse(_.stringify(t)))}catch(r){}}function p(){if(b.__jstorage_meta.PubSub){for(var e=+new Date-2e3,t=0,i=b.__jstorage_meta.PubSub.length;i>t;t++)if(b.__jstorage_meta.PubSub[t][0]<=e){b.__jstorage_meta.PubSub.splice(t,b.__jstorage_meta.PubSub.length-t);break}b.__jstorage_meta.PubSub.length||delete b.__jstorage_meta.PubSub}}function f(e,t){b.__jstorage_meta||(b.__jstorage_meta={}),b.__jstorage_meta.PubSub||(b.__jstorage_meta.PubSub=[]),b.__jstorage_meta.PubSub.unshift([+new Date,e,t]),l(),s()}function m(e,t){for(var i,n=e.length,r=t^n,a=0;n>=4;)i=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^i,n-=4,++a;switch(n){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r^=255&e.charCodeAt(a),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),r^=r>>>15,r>>>0}var g="0.4.12",v=window.jQuery||window.$||(window.$={}),_={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()}||v.parseJSON||v.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||v.toJSON};if("function"!=typeof _.parse||"function"!=typeof _.stringify)throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var w,b={__jstorage_meta:{CRC32:{}}},y={jStorage:"{}"},x=null,C=0,M=!1,k={},T=!1,j=0,P={},S=+new Date,D={isXML:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1},encode:function(e){if(!this.isXML(e))return!1;try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(i){}}return!1},decode:function(e){var t,i="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};return i?(t=i.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),this.isXML(t)?t:!1):!1}};v.jStorage={version:g,set:function(e,t,i){if(u(e),i=i||{},"undefined"==typeof t)return this.deleteKey(e),t;if(D.isXML(t))t={_is_xml:!0,xml:D.encode(t)};else{if("function"==typeof t)return void 0;t&&"object"==typeof t&&(t=_.parse(_.stringify(t)))}return b[e]=t,b.__jstorage_meta.CRC32[e]="2."+m(_.stringify(t),2538058380),this.setTTL(e,i.TTL||0),a(e,"updated"),t},get:function(e,t){return u(e),e in b?b[e]&&"object"==typeof b[e]&&b[e]._is_xml?D.decode(b[e].xml):b[e]:"undefined"==typeof t?null:t},deleteKey:function(e){return u(e),e in b?(delete b[e],"object"==typeof b.__jstorage_meta.TTL&&e in b.__jstorage_meta.TTL&&delete b.__jstorage_meta.TTL[e],delete b.__jstorage_meta.CRC32[e],l(),s(),a(e,"deleted"),!0):!1},setTTL:function(e,t){var i=+new Date;return u(e),t=Number(t)||0,e in b?(b.__jstorage_meta.TTL||(b.__jstorage_meta.TTL={}),t>0?b.__jstorage_meta.TTL[e]=i+t:delete b.__jstorage_meta.TTL[e],l(),c(),s(),!0):!1},getTTL:function(e){var t,i=+new Date;return u(e),e in b&&b.__jstorage_meta.TTL&&b.__jstorage_meta.TTL[e]?(t=b.__jstorage_meta.TTL[e]-i,t||0):0},flush:function(){return b={__jstorage_meta:{CRC32:{}}},l(),s(),a(null,"flushed"),!0},storageObj:function(){function e(){}return e.prototype=b,new e},index:function(){var e,t=[];for(e in b)b.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return C},currentBackend:function(){return M},storageAvailable:function(){return!!M},listenKeyChange:function(e,t){u(e),k[e]||(k[e]=[]),k[e].push(t)},stopListening:function(e,t){if(u(e),k[e]){if(!t)return void delete k[e];for(var i=k[e].length-1;i>=0;i--)k[e][i]==t&&k[e].splice(i,1)}},subscribe:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");P[e]||(P[e]=[]),P[e].push(t)},publish:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");f(e,t)},reInit:function(){t()},noConflict:function(e){return delete window.$.jStorage,e&&(window.jStorage=this),this}},e()}(),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(i))}function i(t){var i=t.target,n=e(i);if(!n.is("[type=submit],[type=image]")){var r=n.closest("[type=submit]");if(0===r.length)return;i=r[0]}var a=this;if(a.clk=i,"image"==i.type)if(void 0!==t.offsetX)a.clk_x=t.offsetX,a.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var s=n.offset();a.clk_x=t.pageX-s.left,a.clk_y=t.pageY-s.top}else a.clk_x=t.pageX-i.offsetLeft,a.clk_y=t.pageY-i.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)}function n(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var r={};r.fileapi=void 0!==e("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData;var a=!!e.fn.prop;e.fn.attr2=function(){if(!a)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function i(i){var n,r,a=e.param(i,t.traditional).split("&"),s=a.length,o=[];for(n=0;s>n;n++)a[n]=a[n].replace(/\+/g," "),r=a[n].split("="),o.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return o}function s(n){for(var r=new FormData,a=0;a<n.length;a++)r.append(n[a].name,n[a].value);if(t.extraData){var s=i(t.extraData);for(a=0;a<s.length;a++)s[a]&&r.append(s[a][0],s[a][1])}t.data=null;var o=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});t.uploadProgress&&(o.xhr=function(){var i=e.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(e){var i=0,n=e.loaded||e.position,r=e.total;e.lengthComputable&&(i=Math.ceil(n/r*100)),t.uploadProgress(e,n,r,i)},!1),i}),o.data=null;var u=o.beforeSend;return o.beforeSend=function(e,i){t.formData?i.data=t.formData:i.data=r,u&&u.call(this,e,i)},e.ajax(o)}function o(i){function r(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(i){n("cannot get iframe.contentWindow document: "+i)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){n("cannot get iframe.contentDocument: "+i),t=e.document}return t}function s(){function t(){try{var e=r(v).readyState;n("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(i){n("Server abort: ",i," (",i.name,")"),o(T),x&&clearTimeout(x),x=void 0}}var i=d.attr2("target"),a=d.attr2("action"),s="multipart/form-data",u=d.attr("enctype")||d.attr("encoding")||s;C.setAttribute("target",f),(!l||/post/i.test(l))&&C.setAttribute("method","POST"),a!=h.url&&C.setAttribute("action",h.url),h.skipEncodingOverride||l&&!/post/i.test(l)||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),h.timeout&&(x=setTimeout(function(){y=!0,o(k)},h.timeout));var c=[];try{if(h.extraData)for(var p in h.extraData)h.extraData.hasOwnProperty(p)&&(e.isPlainObject(h.extraData[p])&&h.extraData[p].hasOwnProperty("name")&&h.extraData[p].hasOwnProperty("value")?c.push(e('<input type="hidden" name="'+h.extraData[p].name+'">').val(h.extraData[p].value).appendTo(C)[0]):c.push(e('<input type="hidden" name="'+p+'">').val(h.extraData[p]).appendTo(C)[0]));h.iframeTarget||g.appendTo("body"),v.attachEvent?v.attachEvent("onload",o):v.addEventListener("load",o,!1),setTimeout(t,15);try{C.submit()}catch(m){var _=document.createElement("form").submit;_.apply(C)}}finally{C.setAttribute("action",a),C.setAttribute("enctype",u),i?C.setAttribute("target",i):d.removeAttr("target"),e(c).remove()}}function o(t){if(!_.aborted&&!O){if(D=r(v),D||(n("cannot access response document"),t=T),t===k&&_)return _.abort("timeout"),void M.reject(_,"timeout");if(t==T&&_)return _.abort("server abort"),void M.reject(_,"error","server abort");if(D&&D.location.href!=h.iframeSrc||y){v.detachEvent?v.detachEvent("onload",o):v.removeEventListener("load",o,!1);var i,a="success";try{if(y)throw"timeout";var s="xml"==h.dataType||D.XMLDocument||e.isXMLDoc(D);if(n("isXml="+s),!s&&window.opera&&(null===D.body||!D.body.innerHTML)&&--$)return n("requeing onLoad callback, DOM not available"),void setTimeout(o,250);var l=D.body?D.body:D.documentElement;_.responseText=l?l.innerHTML:null,_.responseXML=D.XMLDocument?D.XMLDocument:D,s&&(h.dataType="xml"),_.getResponseHeader=function(e){var t={"content-type":h.dataType};return t[e.toLowerCase()]},l&&(_.status=Number(l.getAttribute("status"))||_.status,_.statusText=l.getAttribute("statusText")||_.statusText);var u=(h.dataType||"").toLowerCase(),c=/(json|script|text)/.test(u);if(c||h.textarea){var d=D.getElementsByTagName("textarea")[0];if(d)_.responseText=d.value,_.status=Number(d.getAttribute("status"))||_.status,_.statusText=d.getAttribute("statusText")||_.statusText;else if(c){var f=D.getElementsByTagName("pre")[0],m=D.getElementsByTagName("body")[0];f?_.responseText=f.textContent?f.textContent:f.innerText:m&&(_.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==u&&!_.responseXML&&_.responseText&&(_.responseXML=W(_.responseText));try{S=A(_,u,h)}catch(w){a="parsererror",_.error=i=w||a}}catch(w){n("error caught: ",w),a="error",_.error=i=w||a}_.aborted&&(n("upload aborted"),a=null),_.status&&(a=_.status>=200&&_.status<300||304===_.status?"success":"error"),"success"===a?(h.success&&h.success.call(h.context,S,"success",_),M.resolve(_.responseText,"success",_),p&&e.event.trigger("ajaxSuccess",[_,h])):a&&(void 0===i&&(i=_.statusText),h.error&&h.error.call(h.context,_,a,i),M.reject(_,"error",i),p&&e.event.trigger("ajaxError",[_,h,i])),p&&e.event.trigger("ajaxComplete",[_,h]),p&&!--e.active&&e.event.trigger("ajaxStop"),h.complete&&h.complete.call(h.context,_,a),O=!0,h.timeout&&clearTimeout(x),setTimeout(function(){h.iframeTarget?g.attr("src",h.iframeSrc):g.remove(),_.responseXML=null},100)}}}var u,c,h,p,f,g,v,_,w,b,y,x,C=d[0],M=e.Deferred();if(M.abort=function(e){_.abort(e)},i)for(c=0;c<m.length;c++)u=e(m[c]),a?u.prop("disabled",!1):u.removeAttr("disabled");if(h=e.extend(!0,{},e.ajaxSettings,t),h.context=h.context||h,f="jqFormIO"+(new Date).getTime(),h.iframeTarget?(g=e(h.iframeTarget),b=g.attr2("name"),b?f=b:g.attr2("name",f)):(g=e('<iframe name="'+f+'" src="'+h.iframeSrc+'" />'),g.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=g[0],_={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}g.attr("src",h.iframeSrc),_.error=i,h.error&&h.error.call(h.context,_,i,t),p&&e.event.trigger("ajaxError",[_,h,i]),h.complete&&h.complete.call(h.context,_,i)}},p=h.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[_,h]),h.beforeSend&&h.beforeSend.call(h.context,_,h)===!1)return h.global&&e.active--,M.reject(),M;if(_.aborted)return M.reject(),M;w=C.clk,w&&(b=w.name,b&&!w.disabled&&(h.extraData=h.extraData||{},h.extraData[b]=w.value,"image"==w.type&&(h.extraData[b+".x"]=C.clk_x,h.extraData[b+".y"]=C.clk_y)));var k=1,T=2,j=e("meta[name=csrf-token]").attr("content"),P=e("meta[name=csrf-param]").attr("content");P&&j&&(h.extraData=h.extraData||{},h.extraData[P]=j),h.forceSync?s():setTimeout(s,10);var S,D,O,$=50,W=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},I=e.parseJSON||function(e){return window.eval("("+e+")")},A=function(t,i,n){var r=t.getResponseHeader("content-type")||"",a="xml"===i||!i&&r.indexOf("xml")>=0,s=a?t.responseXML:t.responseText;return a&&"parsererror"===s.documentElement.nodeName&&e.error&&e.error("parsererror"),n&&n.dataFilter&&(s=n.dataFilter(s,i)),"string"==typeof s&&("json"===i||!i&&r.indexOf("json")>=0?s=I(s):("script"===i||!i&&r.indexOf("javascript")>=0)&&e.globalEval(s)),s};return M}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var l,u,c,d=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),l=t.type||this.attr2("method"),u=t.url||this.attr2("action"),c="string"==typeof u?e.trim(u):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:c,success:e.ajaxSettings.success,type:l||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var h={};if(this.trigger("form-pre-serialize",[this,t,h]),h.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var f,m=[],g=this.formToArray(t.semantic,m);if(t.data&&(t.extraData=t.data,f=e.param(t.data,p)),t.beforeSubmit&&t.beforeSubmit(g,this,t)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),
this;if(this.trigger("form-submit-validate",[g,this,t,h]),h.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=e.param(g,p);f&&(v=v?v+"&"+f:f),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+v,t.data=null):t.data=v;var _=[];if(t.resetForm&&_.push(function(){d.resetForm()}),t.clearForm&&_.push(function(){d.clearForm(t.includeHidden)}),!t.dataType&&t.target){var w=t.success||function(){};_.push(function(i){var n=t.replaceTarget?"replaceWith":"html";e(t.target)[n](i).each(w,arguments)})}else t.success&&_.push(t.success);if(t.success=function(e,i,n){for(var r=t.context||this,a=0,s=_.length;s>a;a++)_[a].apply(r,[e,i,n||d,d])},t.error){var b=t.error;t.error=function(e,i,n){var r=t.context||this;b.apply(r,[e,i,n,d])}}if(t.complete){var y=t.complete;t.complete=function(e,i){var n=t.context||this;y.apply(n,[e,i,d])}}var x=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),C=x.length>0,M="multipart/form-data",k=d.attr("enctype")==M||d.attr("encoding")==M,T=r.fileapi&&r.formdata;n("fileAPI :"+T);var j,P=(C||k)&&!T;t.iframe!==!1&&(t.iframe||P)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){j=o(g)}):j=o(g):j=(C||k)&&T?s(g):e.ajax(t),d.removeData("jqxhr").data("jqxhr",j);for(var S=0;S<m.length;S++)m[S]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&e.isFunction(e.fn.on),!r.delegation&&0===this.length){var a={s:this.selector,c:this.context};return!e.isReady&&a.s?(n("DOM not ready, queuing ajaxForm"),e(function(){e(a.s,a.c).ajaxForm(r)}),this):(n("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return r.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,r,t).on("click.form-plugin",this.selector,r,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,t).bind("click.form-plugin",r,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,i){var n=[];if(0===this.length)return n;var a,s=this[0],o=this.attr("id"),l=t?s.getElementsByTagName("*"):s.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=e(l).get()),o&&(a=e(':input[form="'+o+'"]').get(),a.length&&(l=(l||[]).concat(a))),!l||!l.length)return n;var u,c,d,h,p,f,m;for(u=0,f=l.length;f>u;u++)if(p=l[u],d=p.name,d&&!p.disabled)if(t&&s.clk&&"image"==p.type)s.clk==p&&(n.push({name:d,value:e(p).val(),type:p.type}),n.push({name:d+".x",value:s.clk_x},{name:d+".y",value:s.clk_y}));else if(h=e.fieldValue(p,!0),h&&h.constructor==Array)for(i&&i.push(p),c=0,m=h.length;m>c;c++)n.push({name:d,value:h[c]});else if(r.fileapi&&"file"==p.type){i&&i.push(p);var g=p.files;if(g.length)for(c=0;c<g.length;c++)n.push({name:d,value:g[c],type:p.type});else n.push({name:d,value:"",type:p.type})}else null!==h&&"undefined"!=typeof h&&(i&&i.push(p),n.push({name:d,value:h,type:p.type,required:p.required}));if(!t&&s.clk){var v=e(s.clk),_=v[0];d=_.name,d&&!_.disabled&&"image"==_.type&&(n.push({name:d,value:v.val()}),n.push({name:d+".x",value:s.clk_x},{name:d+".y",value:s.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var n=this.name;if(n){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var a=0,s=r.length;s>a;a++)i.push({name:n,value:r[a]});else null!==r&&"undefined"!=typeof r&&i.push({name:this.name,value:r})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],n=0,r=this.length;r>n;n++){var a=this[n],s=e.fieldValue(a,t);null===s||"undefined"==typeof s||s.constructor==Array&&!s.length||(s.constructor==Array?e.merge(i,s):i.push(s))}return i},e.fieldValue=function(t,i){var n=t.name,r=t.type,a=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==a&&-1==t.selectedIndex))return null;if("select"==a){var s=t.selectedIndex;if(0>s)return null;for(var o=[],l=t.options,u="select-one"==r,c=u?s+1:l.length,d=u?s:0;c>d;d++){var h=l[d];if(h.selected){var p=h.value;if(p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),u)return p;o.push(p)}}return o}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,r=this.tagName.toLowerCase();i.test(n)||"textarea"==r?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(n)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var n=e(this).parent("select");t&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),function(){"use strict";function e(){}function t(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}var n=e.prototype,r=this,a=r.EventEmitter;n.getListeners=function(e){var t,i,n=this._getEvents();if("object"==typeof e){t={};for(i in n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i])}else t=n[e]||(n[e]=[]);return t},n.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},n.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&(t={},t[e]=i),t||i},n.addListener=function(e,i){var n,r=this.getListenersAsObject(e),a="object"==typeof i;for(n in r)r.hasOwnProperty(n)&&-1===t(r[n],i)&&r[n].push(a?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,i){var n,r,a=this.getListenersAsObject(e);for(r in a)a.hasOwnProperty(r)&&(n=t(a[r],i),-1!==n&&a[r].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,i){var n,r,a=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)a.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(r=t[n])&&("function"==typeof r?a.call(this,n,r):s.call(this,n,r));return this},n.removeEvent=function(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if("object"===i)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(e,t){var i,n,r,a,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(n=s[r].length;n--;)i=s[r][n],i.once===!0&&this.removeListener(e,i.listener),a=i.listener.apply(this,t||[]),a===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=a,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){function t(t){var i=e.event;return i.target=i.target||i.srcElement||t,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(e,t,i){e.addEventListener(t,i,!1)}:i.attachEvent&&(n=function(e,i,n){e[i+n]=n.handleEvent?function(){var i=t(e);n.handleEvent.call(n,i)}:function(){var i=t(e);n.call(e,i)},e.attachEvent("on"+i,e[i+n])});var r=function(){};i.removeEventListener?r=function(e,t,i){e.removeEventListener(t,i,!1)}:i.detachEvent&&(r=function(e,t,i){e.detachEvent("on"+t,e[t+i]);try{delete e[t+i]}catch(n){e[t+i]=void 0}});var a={bind:n,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",a):e.eventie=a}(this),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return t(e,i,n)}):"object"==typeof module&&module.exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,i){function n(e,t){for(var i in t)e[i]=t[i];return e}function r(e){return"[object Array]"==d.call(e)}function a(e){var t=[];if(r(e))t=e;else if("number"==typeof e.length)for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t}function s(e,t,i){if(!(this instanceof s))return new s(e,t,i);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=a(e),this.options=n({},this.options),"function"==typeof t?i=t:n(this.options,t),i&&this.on("always",i),this.getImages(),u&&(this.jqDeferred=new u.Deferred);var r=this;setTimeout(function(){r.check()})}function o(e){this.img=e}function l(e,t){this.url=e,this.element=t,this.img=new Image}var u=e.jQuery,c=e.console,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0;e<this.elements.length;e++){var t=this.elements[e];this.addElementImages(t)}},s.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&h[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var r=i[n];this.addImage(r)}if("string"==typeof this.options.background){var a=e.querySelectorAll(this.options.background);for(n=0;n<a.length;n++){var s=a[n];this.addElementBackgroundImages(s)}}}};var h={1:!0,9:!0,11:!0};s.prototype.addElementBackgroundImages=function(e){for(var t=p(e),i=/url\(['"]*([^'"\)]+)['"]*\)/gi,n=i.exec(t.backgroundImage);null!==n;){var r=n&&n[1];r&&this.addBackground(r,e),n=i.exec(t.backgroundImage)}};var p=e.getComputedStyle||function(e){return e.currentStyle};return s.prototype.addImage=function(e){var t=new o(e);this.images.push(t)},s.prototype.addBackground=function(e,t){var i=new l(e,t);this.images.push(i)},s.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();for(var i=0;i<this.images.length;i++){var n=this.images[i];n.once("progress",e),n.check()}},s.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emit("progress",this,e,t),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&c&&c.log("progress: "+i,e,t)},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emit(e,this),this.emit("always",this),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},o.prototype=new t,o.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,i.bind(this.proxyImage,"load",this),i.bind(this.proxyImage,"error",this),i.bind(this.img,"load",this),i.bind(this.img,"error",this),void(this.proxyImage.src=this.img.src))},o.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},o.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("progress",this,this.img,t)},o.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){i.unbind(this.proxyImage,"load",this),i.unbind(this.proxyImage,"error",this),i.unbind(this.img,"load",this),i.unbind(this.img,"error",this)},l.prototype=new o,l.prototype.check=function(){i.bind(this.img,"load",this),i.bind(this.img,"error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},l.prototype.unbindEvents=function(){i.unbind(this.img,"load",this),i.unbind(this.img,"error",this)},l.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("progress",this,this.element,t)},s.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(u=t,u.fn.imagesLoaded=function(e,t){var i=new s(this,e,t);return i.jqDeferred.promise(u(this))})},s.makeJQueryPlugin(),s}),function(e,t,i,n){"use strict";e.single=function(){var t=e({});return function(e){return t[0]=e,t}}(),e.fn.contextMenu=function(t,i,n){r[t]?i&&(i instanceof Array||"string"==typeof i||i.nodeType||i.jquery||(n=i,i=null)):(n=i,i=t,t="popup"),i instanceof Array&&"update"!=t&&(t="menu");var s=n;return e.inArray(t,["menu","popup","close","destroy"])>-1?(n=a.optionOtimizer(t,n),this.each(function(){var a=e(this);s=e.extend({},e.fn.contextMenu.defaults,n),s.baseTrigger||(s.baseTrigger=a),r[t].call(a,i,s)})):r[t].call(this,i,s),this},e.fn.contextMenu.defaults={triggerOn:"click",subMenuTriggerOn:"hover click",displayAround:"cursor",mouseClick:"left",verAdjust:0,horAdjust:0,top:"auto",left:"auto",closeOther:!0,containment:t,winEventClose:!0,position:"auto",closeOnClick:!0,onOpen:function(e,t){},afterOpen:function(e,t){},onClose:function(e,t){}};var r={menu:function(e,t){e=a.createMenuList(this,e,t),a.contextMenuBind.call(this,e,t,"menu")},popup:function(t,i){e(t).addClass("iw-contextMenu"),a.contextMenuBind.call(this,t,i,"popup")},update:function(t,i){var r=this;i=i||{},this.each(function(){var s=e(this),o=s.data("iw-menuData");o||(r.contextMenu("refresh"),o=s.data("iw-menuData"));var l=o.menu;if("object"==typeof t)for(var u=0;u<t.length;u++){var c=t[u].name,d=t[u].disable,h=t[u].fun,p=t[u].img,f=t[u].title,m=t[u].className,g=l.children("li").filter(function(){return e(this).contents().filter(function(){return 3==this.nodeType}).text()==c}),v=t[u].subMenu;if(d!=n&&(d?g.addClass("iw-mDisable"):g.removeClass("iw-mDisable")),h&&g.unbind("click.contextMenu").bind("click.contextMenu",h),f!=n&&g.attr("title",f),m!=n&&g.attr("class",m),p){var _=g.find(".iw-mIcon");_.length?_[0].src=p:g.prepend('<img src="'+p+'" align="absmiddle" class="iw-mIcon" />')}v&&g.contextMenu("update",v)}a.onOff(l);var w=i.triggerOn;if(w){s.unbind(".contextMenu"),w=w.split(" ");for(var b=[],u=0,y=w.length;y>u;u++)b.push(w[u]+".contextMenu");s.bind(b.join(" "),a.eventHandler)}o.option=e.extend({},o.option,i),s.data("iw-menuData",o)})},refresh:function(){var t=this.filter(function(){return!!e(this).data("iw-menuData")}).data("iw-menuData"),i=this.filter(function(){return!e(this).data("iw-menuData")});t.option.baseTrigger=this,a.contextMenuBind.call(i,t.menuSelector,t.option)},open:function(t,i){i=i||{};var n=i.event||e.Event("click");i.top&&(n.clientY=i.top),i.left&&(n.clientX=i.left),this.each(function(){a.eventHandler.call(this,n)})},close:function(){var e=this.data("iw-menuData");e&&a.closeContextMenu(e.option,this,e.menu,null)},value:function(e){var t=this.data("iw-menuData");return t[e]?t[e]:t.option?t.option[e]:null},destroy:function(){var t=this,i=t.data("iw-menuData").menuId,n=e(".iw-contextMenu[menuId="+i+"]"),r=n.data("iw-menuData");r&&(1==r.noTrigger?n.hasClass("iw-created")?n.remove():(n.removeClass("iw-contextMenu "+i).removeAttr("menuId").removeData("iw-menuData"),n.find("li.iw-mTrigger").contextMenu("destroy")):(r.noTrigger--,n.data("iw-menuData",r)),t.unbind(".contextMenu").removeClass("iw-mTrigger").removeData("iw-menuData"))}},a={contextMenuBind:function(t,i,n){var r=this,s=e(t),o=s.data("iw-menuData");if(0!=s.length||(s=r.find(t),0!=s.length)){"menu"==n&&a.menuHover(s);var l=i.baseTrigger;if(o)o.noTrigger++,s.data("iw-menuData",o);else{var u;l.data("iw-menuData")?u=l.data("iw-menuData").menuId:(u=Math.ceil(1e5*Math.random()),l.data("iw-menuData",{menuId:u}));var c=s.clone();c.appendTo("body"),o={menuId:u,menuWidth:c.outerWidth(!0),menuHeight:c.outerHeight(!0),noTrigger:1,trigger:r},s.data("iw-menuData",o).attr("menuId",u),c.remove()}r.addClass("iw-mTrigger").data("iw-menuData",{menuId:o.menuId,option:i,menu:s,menuSelector:t,method:n});var d=i.triggerOn;-1!=d.indexOf("hover")&&(d=d.replace("hover","mouseenter"),-1!=l.index(r)&&l.add(s).bind("mouseleave.contextMenu",function(t){0==e(t.relatedTarget).closest(".iw-contextMenu").length&&e('.iw-contextMenu[menuId="'+o.menuId+'"]').fadeOut(100)})),r.delegate("input,a,.needs-click","click",function(e){e.stopImmediatePropagation()}),d=d.split(" ");for(var h=[],p=0,f=d.length;f>p;p++)h.push(d[p]+".contextMenu");r.bind(h.join(" "),a.eventHandler),s.bind("click mouseenter",function(e){e.stopPropagation()}),s.delegate("li","click",function(t){i.closeOnClick&&!e.single(this).hasClass("iw-has-submenu")&&a.closeContextMenu(i,r,s,t)})}},eventHandler:function(i){i.preventDefault();var n=e(this),r=n.data("iw-menuData"),s=r.menu,o=s.data("iw-menuData"),l=r.option,u=l.containment,c={trigger:n,menu:s},d=u==t,h=-1==l.baseTrigger.index(n);!h&&l.closeOther&&e(".iw-contextMenu").css("display","none"),s.find(".iw-mSelected").removeClass("iw-mSelected"),l.onOpen.call(this,c,i);var p,f,m,g,v=e(u),_=v.innerHeight(),w=v.innerWidth(),b=0,y=0,x=o.menuHeight,C=o.menuWidth,M=0,k=0,T=p=parseInt(l.verAdjust),j=f=parseInt(l.horAdjust);if(d||(b=v.offset().top,y=v.offset().left,"static"==v.css("position")&&v.css("position","relative")),"cursor"==l.displayAround)M=d?i.clientX:i.clientX+e(t).scrollLeft()-y,k=d?i.clientY:i.clientY+e(t).scrollTop()-b,m=k+x,g=M+C,m>_&&(0>k-x?x-k>m-_?(k=_-x,p=-1*p):(k=0,p=0):(k-=x,p=-1*p)),g>w&&(0>M-C?C-M>g-w?(M=w-C,f=-1*f):(M=0,f=0):(M-=C,f=-1*f));else if("trigger"==l.displayAround){var P=n.outerHeight(!0),S=n.outerWidth(!0),D=d?n.offset().left-v.scrollLeft():n.offset().left-y,O=d?n.offset().top-v.scrollTop():n.offset().top-b,$=S;M=D+S,k=O,m=k+x,g=M+C,m>_&&(0>k-x?x-k>m-_?(k=_-x,p=-1*p):(k=0,p=0):(k=k-x+P,p=-1*p)),g>w&&(0>M-C?C-M>g-w?(M=w-C,f=-1*f,$=-S):(M=0,f=0,$=0):(M=M-C-S,f=-1*f,$=-S)),"top"==l.position?(k=O-x,p=T,M-=$):"left"==l.position?(M=D-C,f=j):"bottom"==l.position?(k=O+P,p=T,M-=$):"right"==l.position&&(M=D+S,f=j)}var W={position:d||h?"fixed":"absolute",display:"inline-block",height:"",width:""};if("auto"!=l.left&&(M=a.getPxSize(l.left,w)),"auto"!=l.top&&(k=a.getPxSize(l.top,_)),!d){var I=n.offsetParent().offset();h?(M=M+y-e(t).scrollLeft(),k=k+b-e(t).scrollTop()):(M-=y-I.left,k-=b-I.top)}W.left=M+f+"px",W.top=k+p+"px",s.css(W),l.afterOpen.call(this,c,i),0==n.closest(".iw-contextMenu").length&&(e(".iw-curMenu").removeClass("iw-curMenu"),s.addClass("iw-curMenu"));var A={trigger:n,menu:s,option:l,method:r.method};e("html").unbind("click",a.clickEvent).click(A,a.clickEvent),l.winEventClose&&e(t).bind("scroll resize",A,a.scrollEvent)},scrollEvent:function(e){a.closeContextMenu(e.data.option,e.data.trigger,e.data.menu,e)},clickEvent:function(t){var i=t.data.trigger.get(0);i!==t.target&&0==e(t.target).closest(".iw-contextMenu").length&&a.closeContextMenu(t.data.option,t.data.trigger,t.data.menu,t)},closeContextMenu:function(n,r,s,o){e("html").unbind("click",a.clickEvent),e(t).unbind("scroll resize",a.scrollEvent),e(".iw-contextMenu").css("display","none"),e(i).focus(),n.onClose.call(this,{trigger:r,menu:s},o)},getPxSize:function(e,t){return isNaN(e)?-1!=e.indexOf("%")?parseInt(e)*t/100:parseInt(e):e},selectMenu:function(e,t){var i=e.find("li.iw-mSelected"),n=i.find(".iw-contextMenu");0!=n.length&&i[0]!=t[0]&&n.fadeOut(100),i.removeClass("iw-mSelected"),t.addClass("iw-mSelected")},menuHover:function(t){Date.now();t.children("li").bind("mouseenter.contextMenu click.contextMenu",function(i){e(".iw-curMenu").removeClass("iw-curMenu"),t.addClass("iw-curMenu"),a.selectMenu(t,e(this))})},createMenuList:function(i,n,r){var s=r.baseTrigger,o=Math.floor(1e4*Math.random());if("object"==typeof n&&!n.nodeType&&!n.jquery){var l=e('<ul class="iw-contextMenu iw-created iw-cm-menu" id="iw-contextMenu'+o+'"></ul>');if(e.each(n,function(t,i){var n=i.name,o=i.fun||function(){},u=i.subMenu,c=i.img||"",d=i.title||"",h=i.className||"",p=i.disable,f=e('<li title="'+d+'" class="'+h+'">'+n+"</li>");c&&f.prepend('<img src="'+c+'" align="absmiddle" class="iw-mIcon" />'),p&&f.addClass("iw-mDisable"),u||f.bind("click.contextMenu",function(e){o.call(this,{trigger:s,menu:l},e)}),l.append(f),u&&(f.addClass("iw-has-submenu").append('<div class="iw-cm-arrow-right" />'),a.subMenu(f,u,s,r))}),-1==s.index(i[0]))i.append(l);else{var u=r.containment==t?"body":r.containment;e(u).append(l)}return a.onOff(e("#iw-contextMenu"+o)),"#iw-contextMenu"+o}if(0!=e(n).length){var c=e(n);return c.removeClass("iw-contextMenuCurrent").addClass("iw-contextMenu iw-cm-menu iw-contextMenu"+o).attr("menuId","iw-contextMenu"+o).css("display","none"),c.find("ul").each(function(t,i){var n=e(this),o=n.parent("li");o.append('<div class="iw-cm-arrow-right" />'),n.addClass("iw-contextMenuCurrent"),a.subMenu(o,".iw-contextMenuCurrent",s,r)}),a.onOff(e(".iw-contextMenu"+o)),".iw-contextMenu"+o}},subMenu:function(e,t,i,n){e.contextMenu("menu",t,{triggerOn:n.subMenuTriggerOn,displayAround:"trigger",position:"auto",mouseClick:"left",baseTrigger:i,containment:n.containment})},onOff:function(t){t.find(".iw-mOverlay").remove(),t.find(".iw-mDisable").each(function(){var t=e(this);t.append('<div class="iw-mOverlay"/>'),t.find(".iw-mOverlay").bind("click mouseenter",function(e){e.stopPropagation()})})},optionOtimizer:function(t,i){return i?("menu"==t&&(i.mouseClick||(i.mouseClick="right")),"right"==i.mouseClick&&"click"==i.triggerOn&&(i.triggerOn="contextmenu"),-1!=e.inArray(i.triggerOn,["hover","mouseenter","mouseover","mouseleave","mouseout","focusin","focusout"])&&(i.displayAround="trigger"),i):void 0}}}(jQuery,window,document),function(e){e.fn.wheelColorPicker=function(){var i=this;if(arguments.length>0)var n=[].shift,r=n.apply(arguments),a="string"==typeof r?r.charAt(0).toUpperCase()+r.slice(1):r;else var r=void 0,a=void 0;var s=arguments;return this.each(function(){var n=e(this).data("jQWCP.instance");if(void 0==n||null==n){var o={};"object"==typeof r&&(o=r),n=new t.ColorPicker(this,o),e(this).data("jQWCP.instance",n)}if(void 0===r||"object"==typeof r);else if("function"==typeof n[r]){var l=n[r].apply(n,s);if(l!==n)return i=l,!1}else if("function"==typeof n["set"+a]&&s.length>0){var l=n["set"+a].apply(n,s);if(l!==n)return i=l,!1}else if("function"==typeof n["get"+a]){var l=n["get"+a].apply(n,s);if(l!==n)return i=l,!1}else if(void 0!==n.options[r]&&s.length>0)n.options[r]=s[0];else{if(void 0!==n.options[r])return i=n.options[r],!1;e.error("Method/option named "+r+" does not exist on jQuery.wheelColorPicker")}}),i};var t=e.fn.wheelColorPicker;t.defaults={format:"hex",preview:!1,live:!0,userinput:!0,validate:!0,autoResize:!0,autoFormat:!0,preserveWheel:null,cssClass:"",layout:"popup",animDuration:200,quality:1,sliders:null,rounding:2,mobile:!0,mobileWidth:480,hideKeyboard:!1,htmlOptions:!0,snap:!1,snapTolerance:.05},t.BUG_RELATIVE_PAGE_ORIGIN=!1,t.ORIGIN={left:0,top:0},t.colorToStr=function(e,t){var i="";switch(t){case"css":i="#";case"hex":var n=Math.round(255*e.r).toString(16);1==n.length&&(n="0"+n);var r=Math.round(255*e.g).toString(16);1==r.length&&(r="0"+r);var a=Math.round(255*e.b).toString(16);1==a.length&&(a="0"+a),i+=n+r+a;break;case"cssa":i="#";case"hexa":var n=Math.round(255*e.r).toString(16);1==n.length&&(n="0"+n);var r=Math.round(255*e.g).toString(16);1==r.length&&(r="0"+r);var a=Math.round(255*e.b).toString(16);1==a.length&&(a="0"+a);var s=Math.round(255*e.a).toString(16);1==s.length&&(s="0"+s),i+=n+r+a+s;break;case"rgb":i="rgb("+Math.round(255*e.r)+","+Math.round(255*e.g)+","+Math.round(255*e.b)+")";break;case"rgb%":i="rgb("+100*e.r+"%,"+100*e.g+"%,"+100*e.b+"%)";break;case"rgba":i="rgba("+Math.round(255*e.r)+","+Math.round(255*e.g)+","+Math.round(255*e.b)+","+e.a+")";break;case"rgba%":i="rgba("+100*e.r+"%,"+100*e.g+"%,"+100*e.b+"%,"+100*e.a+"%)";break;case"hsv":i="hsv("+360*e.h+","+e.s+","+e.v+")";break;case"hsv%":i="hsv("+100*e.h+"%,"+100*e.s+"%,"+100*e.v+"%)";break;case"hsva":i="hsva("+360*e.h+","+e.s+","+e.v+","+e.a+")";break;case"hsva%":i="hsva("+100*e.h+"%,"+100*e.s+"%,"+100*e.v+"%,"+100*e.a+"%)";break;case"hsb":i="hsb("+e.h+","+e.s+","+e.v+")";break;case"hsb%":i="hsb("+100*e.h+"%,"+100*e.s+"%,"+100*e.v+"%)";break;case"hsba":i="hsba("+e.h+","+e.s+","+e.v+","+e.a+")";break;case"hsba%":i="hsba("+100*e.h+"%,"+100*e.s+"%,"+100*e.v+"%,"+100*e.a+"%)"}return i},t.strToColor=function(e){var t,i,n={a:1};if(null!=e.match(/^#[0-9a-f]{3}$/i)||e.match(/^#[0-9a-f]{4}$/i)){if(isNaN(n.r=17*parseInt(e.substr(1,1),16)/255))return!1;if(isNaN(n.g=17*parseInt(e.substr(2,1),16)/255))return!1;if(isNaN(n.b=17*parseInt(e.substr(3,1),16)/255))return!1;if(5==e.length&&isNaN(n.a=17*parseInt(e.substr(4,1),16)/255))return!1}else if(null!=e.match(/^[0-9a-f]{3}$/i)||null!=e.match(/^[0-9a-f]{4}$/i)){if(isNaN(n.r=17*parseInt(e.substr(0,1),16)/255))return!1;if(isNaN(n.g=17*parseInt(e.substr(1,1),16)/255))return!1;if(isNaN(n.b=17*parseInt(e.substr(2,1),16)/255))return!1;if(4==e.length&&isNaN(n.a=17*parseInt(e.substr(3,1),16)/255))return!1}else if(null!=e.match(/^#[0-9a-f]{6}$/i)||null!=e.match(/^#[0-9a-f]{8}$/i)){if(isNaN(n.r=parseInt(e.substr(1,2),16)/255))return!1;if(isNaN(n.g=parseInt(e.substr(3,2),16)/255))return!1;if(isNaN(n.b=parseInt(e.substr(5,2),16)/255))return!1;if(9==e.length&&isNaN(n.a=parseInt(e.substr(7,2),16)/255))return!1}else if(null!=e.match(/^[0-9a-f]{6}$/i)||null!=e.match(/^[0-9a-f]{8}$/i)){if(isNaN(n.r=parseInt(e.substr(0,2),16)/255))return!1;if(isNaN(n.g=parseInt(e.substr(2,2),16)/255))return!1;if(isNaN(n.b=parseInt(e.substr(4,2),16)/255))return!1;if(8==e.length&&isNaN(n.a=parseInt(e.substr(6,2),16)/255))return!1}else if(null!=e.match(/^rgba\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)||null!=e.match(/^rgb\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)){if(i=null!=e.match(/a/i)?!0:!1,t=e.substring(e.indexOf("(")+1,e.indexOf(",")),"%"==t.charAt(t.length-1)){if(isNaN(n.r=parseFloat(t)/100))return!1}else if(isNaN(n.r=parseInt(t)/255))return!1;if(t=e.substring(e.indexOf(",")+1,e.indexOf(",",e.indexOf(",")+1)),"%"==t.charAt(t.length-1)){if(isNaN(n.g=parseFloat(t)/100))return!1}else if(isNaN(n.g=parseInt(t)/255))return!1;if(t=i?e.substring(e.indexOf(",",e.indexOf(",")+1)+1,e.lastIndexOf(",")):e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")")),"%"==t.charAt(t.length-1)){if(isNaN(n.b=parseFloat(t)/100))return!1}else if(isNaN(n.b=parseInt(t)/255))return!1;if(i)if(t=e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")")),"%"==t.charAt(t.length-1)){if(isNaN(n.a=parseFloat(t)/100))return!1}else if(isNaN(n.a=parseFloat(t)))return!1}else{if(null==e.match(/^hsva\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)&&null==e.match(/^hsv\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)&&null==e.match(/^hsba\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)&&null==e.match(/^hsb\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i))return!1;if(i=null!=e.match(/a/i)?!0:!1,t=e.substring(e.indexOf("(")+1,e.indexOf(",")),"%"==t.charAt(t.length-1)){if(isNaN(n.h=parseFloat(t)/100))return!1}else if(isNaN(n.h=parseFloat(t)/360))return!1;if(t=e.substring(e.indexOf(",")+1,e.indexOf(",",e.indexOf(",")+1)),"%"==t.charAt(t.length-1)){if(isNaN(n.s=parseFloat(t)/100))return!1}else if(isNaN(n.s=parseFloat(t)))return!1;if(t=i?e.substring(e.indexOf(",",e.indexOf(",")+1)+1,e.lastIndexOf(",")):e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")")),"%"==t.charAt(t.length-1)){if(isNaN(n.v=parseFloat(t)/100))return!1}else if(isNaN(n.v=parseFloat(t)))return!1;if(i)if(t=e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")")),"%"==t.charAt(t.length-1)){if(isNaN(n.a=parseFloat(t)/100))return!1}else if(isNaN(n.a=parseFloat(t)))return!1}return n},t.hsvToRgb=function(e,t,i){var n=1/6>=e||e>=5/6?1:1/3>e?1-6*(e-1/6):e>4/6?6*(e-4/6):0,r=e>=1/6&&.5>=e?1:1/6>e?6*e:4/6>e?1-6*(e-.5):0,a=e>=.5&&5/6>=e?1:e>2/6&&.5>e?6*(e-2/6):e>5/6?1-6*(e-5/6):0,s=(n+(1-n)*(1-t))*i,o=(r+(1-r)*(1-t))*i,l=(a+(1-a)*(1-t))*i;return{r:s,g:o,b:l}},t.rgbToHsv=function(e,t,i){var n,r,a,s=Math.max(e,t,i),o=Math.min(e,t,i),l=s-o;return r=0!=s?l/s:0,n=0==l?0:e==s?(6+(t-i)/l)%6:t==s?2+(i-e)/l:i==s?4+(e-t)/l:0,n/=6,a=s,{h:n,s:r,v:a}},t.ColorPicker=function(i,n){this.input=i,this.color={h:0,s:0,v:1,r:1,g:1,b:1,a:1},this.setValue(this.input.value),this.options=e.extend(!0,{},t.defaults),this.setOptions(n),null==this.options.sliders&&(this.options.sliders="wvp"+(this.options.format.indexOf("a")>=0?"a":"")),this.init()},t.ColorPicker.widget=null,t.ColorPicker.overlay=null,t.ColorPicker.init=function(){if(1!=t.ColorPicker.init.hasInit){t.ColorPicker.init.hasInit=!0;var i=e('<div class="jQWCP-overlay" style="display: none;"></div>');i.on("click",t.Handler.overlay_click),t.ColorPicker.overlay=i.get(0),e("body").append(i);var n=t.ColorPicker.getWheelDataUrl(200);e("head").append('<style type="text/css">.jQWCP-wWheel {background: url('+n+") no-repeat center center;}</style>"),e("html").on("mouseup.wheelColorPicker",t.Handler.html_mouseup),e("html").on("touchend.wheelColorPicker",t.Handler.html_mouseup),e("html").on("mousemove.wheelColorPicker",t.Handler.html_mousemove),e("html").on("touchmove.wheelColorPicker",t.Handler.html_mousemove),e(window).on("resize.wheelColorPicker",t.Handler.window_resize)}},t.ColorPicker.createWidget=function(){var i=e("<div class='jQWCP-wWidget'><div class='jQWCP-wWheel'><div class='jQWCP-wWheelOverlay'></div><span class='jQWCP-wWheelCursor'></span></div><div class='jQWCP-wHue jQWCP-slider-wrapper'><canvas class='jQWCP-wHueSlider jQWCP-slider' width='1' height='50' title='Hue'></canvas><span class='jQWCP-wHueCursor jQWCP-scursor'></span></div><div class='jQWCP-wSat jQWCP-slider-wrapper'><canvas class='jQWCP-wSatSlider jQWCP-slider' width='1' height='50' title='Saturation'></canvas><span class='jQWCP-wSatCursor jQWCP-scursor'></span></div><div class='jQWCP-wVal jQWCP-slider-wrapper'><canvas class='jQWCP-wValSlider jQWCP-slider' width='1' height='50' title='Value'></canvas><span class='jQWCP-wValCursor jQWCP-scursor'></span></div><div class='jQWCP-wRed jQWCP-slider-wrapper'><canvas class='jQWCP-wRedSlider jQWCP-slider' width='1' height='50' title='Red'></canvas><span class='jQWCP-wRedCursor jQWCP-scursor'></span></div><div class='jQWCP-wGreen jQWCP-slider-wrapper'><canvas class='jQWCP-wGreenSlider jQWCP-slider' width='1' height='50' title='Green'></canvas><span class='jQWCP-wGreenCursor jQWCP-scursor'></span></div><div class='jQWCP-wBlue jQWCP-slider-wrapper'><canvas class='jQWCP-wBlueSlider jQWCP-slider' width='1' height='50' title='Blue'></canvas><span class='jQWCP-wBlueCursor jQWCP-scursor'></span></div><div class='jQWCP-wAlpha jQWCP-slider-wrapper'><canvas class='jQWCP-wAlphaSlider jQWCP-slider' width='1' height='50' title='Alpha'></canvas><span class='jQWCP-wAlphaCursor jQWCP-scursor'></span></div><div class='jQWCP-wPreview'><canvas class='jQWCP-wPreviewBox' width='1' height='1' title='Selected Color'></canvas></div></div>");
return i.find(".jQWCP-wWheel, .jQWCP-slider-wrapper, .jQWCP-scursor, .jQWCP-slider").attr("unselectable","on").css("-moz-user-select","none").css("-webkit-user-select","none").css("user-select","none").css("-webkit-touch-callout","none"),i.on("contextmenu.wheelColorPicker",function(){return!1}),i.on("mousedown.wheelColorPicker",".jQWCP-wWheel",t.Handler.wheel_mousedown),i.on("touchstart.wheelColorPicker",".jQWCP-wWheel",t.Handler.wheel_mousedown),i.on("mousedown.wheelColorPicker",".jQWCP-wWheelCursor",t.Handler.wheelCursor_mousedown),i.on("touchstart.wheelColorPicker",".jQWCP-wWheelCursor",t.Handler.wheelCursor_mousedown),i.on("mousedown.wheelColorPicker",".jQWCP-slider",t.Handler.slider_mousedown),i.on("touchstart.wheelColorPicker",".jQWCP-slider",t.Handler.slider_mousedown),i.on("mousedown.wheelColorPicker",".jQWCP-scursor",t.Handler.sliderCursor_mousedown),i.on("touchstart.wheelColorPicker",".jQWCP-scursor",t.Handler.sliderCursor_mousedown),i.get(0)},t.ColorPicker.getWheelDataUrl=function(e){var t=e/2,i=t,n=document.createElement("canvas");n.width=e,n.height=e;for(var r=n.getContext("2d"),a=0;e>a;a++)for(var s=0;e>s;s++){var o=Math.sqrt(Math.pow(s-i,2)+Math.pow(a-i,2));if(!(o>t+2)){var l=((s-i==0?i>a?90:270:Math.atan((i-a)/(s-i))/Math.PI*180)+(i>s?180:0)+360)%360,u=o/t,c=(Math.abs(l+360)+60)%360<120?1:l>240?(120-Math.abs(l-360))/60:120>l?(120-l)/60:0,d=Math.abs(l-120)<60?1:Math.abs(l-120)<120?(120-Math.abs(l-120))/60:0,h=Math.abs(l-240)<60?1:Math.abs(l-240)<120?(120-Math.abs(l-240))/60:0,p=Math.round(255*(c+(1-c)*(1-u))),f=Math.round(255*(d+(1-d)*(1-u))),m=Math.round(255*(h+(1-h)*(1-u)));r.fillStyle="rgb("+p+","+f+","+m+")",r.fillRect(s,a,1,1)}}return n.toDataURL()},t.ColorPicker.prototype.options=null,t.ColorPicker.prototype.input=null,t.ColorPicker.prototype.widget=null,t.ColorPicker.prototype.color=null,t.ColorPicker.prototype.lastValue=null,t.ColorPicker.prototype.setOptions=function(i){if(i=e.extend(!0,{},i),this.options.htmlOptions)for(var n in t.defaults)this.input.hasAttribute("data-wcp-"+n)&&void 0===i[n]&&(i[n]=this.input.getAttribute("data-wcp-"+n),"true"==i[n]?i[n]=!0:"false"==i[n]&&(i[n]=!1));for(var n in i)if(void 0!==this.options[n]){var r=n.charAt(0).toUpperCase()+n.slice(1);"function"==typeof this["set"+r]?this["set"+r](i[n]):this.options[n]=i[n]}return this},t.ColorPicker.prototype.init=function(){if(t.ColorPicker.init(),1!=this.hasInit){this.hasInit=!0;var i=e(this.input),n=null;"block"==this.options.layout?(this.widget=t.ColorPicker.createWidget(),n=e(this.widget),n.data("jQWCP.instance",this),n.insertAfter(this.input),"inline"==i.css("display")?n.css("display","inline-block"):n.css("display",i.css("display")),n.append(this.input),i.hide(),void 0!=i.attr("tabindex")?n.attr("tabindex",i.attr("tabindex")):n.attr("tabindex",0),this.refreshWidget(),this.redrawSliders(!0),this.updateSliders(),n.on("focus.wheelColorPicker",t.Handler.widget_focus_block),n.on("blur.wheelColorPicker",t.Handler.widget_blur_block)):(null==t.ColorPicker.widget&&(t.ColorPicker.widget=t.ColorPicker.createWidget(),n=e(t.ColorPicker.widget),n.hide(),e("body").append(n),n.on("mousedown.wheelColorPicker",t.Handler.widget_mousedown_popup)),this.widget=t.ColorPicker.widget,i.on("focus.wheelColorPicker",t.Handler.input_focus_popup),i.on("blur.wheelColorPicker",t.Handler.input_blur_popup)),i.on("keyup.wheelColorPicker",t.Handler.input_keyup),i.on("change.wheelColorPicker",t.Handler.input_change),"object"==typeof this.options.color?(this.setColor(this.options.color),this.options.color=void 0):"string"==typeof this.options.color&&(this.setValue(this.options.color),this.options.color=void 0),this.options.userinput?i.removeAttr("readonly"):i.attr("readonly",!0)}},t.ColorPicker.prototype.destroy=function(){var t=e(this.widget),i=e(this.input);"block"==this.options.layout&&(t.before(this.input),t.remove(),i.show()),i.off("focus.wheelColorPicker"),i.off("blur.wheelColorPicker"),i.off("keyup.wheelColorPicker"),i.off("change.wheelColorPicker"),i.data("jQWCP.instance",null),delete this},t.ColorPicker.prototype.refreshWidget=function(){var t=e(this.widget),i=this.options,n=!1;t.attr("class","jQWCP-wWidget"),"block"==i.layout&&t.addClass("jQWCP-block"),t.addClass(i.cssClass),window.innerWidth<=i.mobileWidth&&"block"!=i.layout&&i.mobile&&(n=!0,t.addClass("jQWCP-mobile")),t.find(".jQWCP-wWheel, .jQWCP-slider-wrapper, .jQWCP-wPreview").hide().addClass("hidden");for(var r in i.sliders){var a=null;switch(this.options.sliders[r]){case"w":a=t.find(".jQWCP-wWheel");break;case"h":a=t.find(".jQWCP-wHue");break;case"s":a=t.find(".jQWCP-wSat");break;case"v":a=t.find(".jQWCP-wVal");break;case"r":a=t.find(".jQWCP-wRed");break;case"g":a=t.find(".jQWCP-wGreen");break;case"b":a=t.find(".jQWCP-wBlue");break;case"a":a=t.find(".jQWCP-wAlpha");break;case"p":a=t.find(".jQWCP-wPreview")}null!=a&&(a.appendTo(this.widget),a.show().removeClass("hidden"))}var s=50*i.quality;t.find(".jQWCP-slider").attr("height",s);var o=t.find(".jQWCP-wWheel, .jQWCP-slider-wrapper, .jQWCP-wPreview").not(".hidden");if(i.autoResize&&!n){var l=0;o.css({width:"",height:""}),o.each(function(t,i){var n=e(i);l+=parseFloat(n.css("margin-left").replace("px",""))+parseFloat(n.css("margin-right").replace("px",""))+n.outerWidth()}),t.css({width:l+"px"})}else{t.css({width:""});var u=t.find(".jQWCP-wWheel").not(".hidden"),c=t.find(".jQWCP-slider-wrapper, .jQWCP-wPreview").not(".hidden");if(u.css({height:t.height()+"px",width:t.height()}),u.length>0)var d=t.width()-u.outerWidth()-parseFloat(u.css("margin-left").replace("px",""))-parseFloat(u.css("margin-right").replace("px",""));else var d=t.width();if(c.length>0){var h=parseFloat(c.css("margin-left").replace("px",""))+parseFloat(c.css("margin-right").replace("px",""));c.css({height:t.height()+"px",width:(d-(c.length-1)*h)/c.length+"px"})}}return this},t.ColorPicker.prototype.redrawSliders=function(t){if(null==this.widget)return this;var i=e(this.widget);if("string"==typeof arguments[0]&&(t=arguments[1]),this!=i.data("jQWCP.instance"))return this;var n=this.options,r=this.color,a=1,s=50*n.quality,o=1,l=0,u=0,c=0,d=0,h=0,p=1;n.live&&(o=r.a,l=Math.round(255*r.r),u=Math.round(255*r.g),c=Math.round(255*r.b),d=r.h,h=r.s,p=r.v);var f=i.find(".jQWCP-wPreviewBox");if(!f.hasClass("hidden")){var m=f.get(0).getContext("2d");m.fillStyle="rgba("+l+","+u+","+c+","+o+")",m.clearRect(0,0,1,1),m.fillRect(0,0,1,1)}if(!this.options.live&&!t)return this;var g=i.find(".jQWCP-wAlphaSlider");if(!g.hasClass("hidden")||t){var v=g.get(0).getContext("2d"),_=v.createLinearGradient(0,0,0,s);_.addColorStop(0,"rgba("+l+","+u+","+c+",1)"),_.addColorStop(1,"rgba("+l+","+u+","+c+",0)"),v.fillStyle=_,v.clearRect(0,0,a,s),v.fillRect(0,0,a,s)}var w=i.find(".jQWCP-wRedSlider");if(!w.hasClass("hidden")||t){var b=w.get(0).getContext("2d"),y=b.createLinearGradient(0,0,0,s);y.addColorStop(0,"rgb(255,"+u+","+c+")"),y.addColorStop(1,"rgb(0,"+u+","+c+")"),b.fillStyle=y,b.fillRect(0,0,a,s)}var x=i.find(".jQWCP-wGreenSlider");if(!x.hasClass("hidden")||t){var C=x.get(0).getContext("2d"),M=C.createLinearGradient(0,0,0,s);M.addColorStop(0,"rgb("+l+",255,"+c+")"),M.addColorStop(1,"rgb("+l+",0,"+c+")"),C.fillStyle=M,C.fillRect(0,0,a,s)}var k=i.find(".jQWCP-wBlueSlider");if(!k.hasClass("hidden")||t){var T=k.get(0).getContext("2d"),j=T.createLinearGradient(0,0,0,s);j.addColorStop(0,"rgb("+l+","+u+",255)"),j.addColorStop(1,"rgb("+l+","+u+",0)"),T.fillStyle=j,T.fillRect(0,0,a,s)}var P=i.find(".jQWCP-wHueSlider");if(!P.hasClass("hidden")||t){var S=P.get(0).getContext("2d"),D=S.createLinearGradient(0,0,0,s);D.addColorStop(0,"#f00"),D.addColorStop(.166666667,"#ff0"),D.addColorStop(.333333333,"#0f0"),D.addColorStop(.5,"#0ff"),D.addColorStop(.666666667,"#00f"),D.addColorStop(.833333333,"#f0f"),D.addColorStop(1,"#f00"),S.fillStyle=D,S.fillRect(0,0,a,s)}var O=i.find(".jQWCP-wSatSlider");if(!O.hasClass("hidden")||t){var $=e.fn.wheelColorPicker.hsvToRgb(d,1,p);$.r=Math.round(255*$.r),$.g=Math.round(255*$.g),$.b=Math.round(255*$.b);var W=O.get(0).getContext("2d"),I=W.createLinearGradient(0,0,0,s);I.addColorStop(0,"rgb("+$.r+","+$.g+","+$.b+")"),I.addColorStop(1,"rgb("+Math.round(255*p)+","+Math.round(255*p)+","+Math.round(255*p)+")"),W.fillStyle=I,W.fillRect(0,0,a,s)}var A=i.find(".jQWCP-wValSlider");if(!A.hasClass("hidden")||t){var Q=e.fn.wheelColorPicker.hsvToRgb(d,h,1);Q.r=Math.round(255*Q.r),Q.g=Math.round(255*Q.g),Q.b=Math.round(255*Q.b);var E=A.get(0).getContext("2d"),N=E.createLinearGradient(0,0,0,s);N.addColorStop(0,"rgb("+Q.r+","+Q.g+","+Q.b+")"),N.addColorStop(1,"#000"),E.fillStyle=N,E.fillRect(0,0,a,s)}return this},t.ColorPicker.prototype.updateSliders=function(){if(null==this.widget)return this;var t=e(this.widget),i=this.color;if(this!=t.data("jQWCP.instance"))return this;var n=t.find(".jQWCP-wWheel");if(!n.hasClass("hidden")){var r=t.find(".jQWCP-wWheelCursor"),a=t.find(".jQWCP-wWheelOverlay"),s=Math.cos(2*Math.PI*i.h)*i.s,o=Math.sin(2*Math.PI*i.h)*i.s,l=n.width()/2,u=n.height()/2;r.css("left",l+s*n.width()/2+"px"),r.css("top",u-o*n.height()/2+"px"),1==this.options.preserveWheel||null==this.options.preserveWheel&&0==this.options.live?a.css("opacity",0):a.css("opacity",1-(i.v<.2?.2:i.v))}var c=t.find(".jQWCP-wHueSlider");if(!c.hasClass("hidden")){var d=t.find(".jQWCP-wHueCursor");d.css("top",i.h*c.height()+"px")}var h=t.find(".jQWCP-wSatSlider");if(!h.hasClass("hidden")){var p=t.find(".jQWCP-wSatCursor");p.css("top",(1-i.s)*h.height()+"px")}var f=t.find(".jQWCP-wValSlider");if(!f.hasClass("hidden")){var m=t.find(".jQWCP-wValCursor");m.css("top",(1-i.v)*f.height()+"px")}var g=t.find(".jQWCP-wRedSlider");if(!g.hasClass("hidden")){var v=t.find(".jQWCP-wRedCursor");v.css("top",(1-i.r)*g.height()+"px")}var _=t.find(".jQWCP-wGreenSlider");if(!_.hasClass("hidden")){var w=t.find(".jQWCP-wGreenCursor");w.css("top",(1-i.g)*_.height()+"px")}var b=t.find(".jQWCP-wBlueSlider");if(!b.hasClass("hidden")){var y=t.find(".jQWCP-wBlueCursor");y.css("top",(1-i.b)*b.height()+"px")}var x=t.find(".jQWCP-wAlphaSlider");if(!x.hasClass("hidden")){var C=t.find(".jQWCP-wAlphaCursor");C.css("top",(1-i.a)*x.height()+"px")}return this},t.ColorPicker.prototype.updateSelection=function(){return this.redrawSliders(),this.updateSliders(),this},t.ColorPicker.prototype.updateInput=function(){if(null==this.widget)return this;var i=e(this.input);this.input.value!=this.getValue()&&(this.input.value=this.getValue()),this.options.preview&&(i.css("background",t.colorToStr(this.color,"rgba")),this.color.v>.5?i.css("color","black"):i.css("color","white"))},t.ColorPicker.prototype.updateActiveControl=function(i){var n=e(e("body").data("jQWCP.activeControl"));if(0!=n.length){var r=(e(this.input),this.options),a=this.color;if(void 0==i.pageX&&i.originalEvent.touches.length>0&&(i.pageX=i.originalEvent.touches[0].pageX,i.pageY=i.originalEvent.touches[0].pageY),n.hasClass("jQWCP-wWheel")){var s=n.find(".jQWCP-wWheelCursor"),o=(n.find(".jQWCP-wWheelOverlay"),(i.pageX-n.offset().left-n.width()/2)/(n.width()/2)),l=-(i.pageY-n.offset().top-n.height()/2)/(n.height()/2);if(t.BUG_RELATIVE_PAGE_ORIGIN)var o=(i.pageX-(n.get(0).getBoundingClientRect().left-t.ORIGIN.left)-n.width()/2)/(n.width()/2),l=-(i.pageY-(n.get(0).getBoundingClientRect().top-t.ORIGIN.top)-n.height()/2)/(n.height()/2);var u=Math.sqrt(Math.pow(o,2)+Math.pow(l,2));u>1&&(u=1),r.snap&&u<r.snapTolerance&&(u=0);var c=0==o&&0==l?0:Math.atan(l/o)/(2*Math.PI);0>c&&(c+=.5),0>l&&(c+=.5),this.setHsv(c,u,a.v)}else if(n.hasClass("jQWCP-slider-wrapper")){var s=n.find(".jQWCP-scursor"),l=(i.pageY-n.offset().top)/n.height();if(t.BUG_RELATIVE_PAGE_ORIGIN)var l=(i.pageY-(n.get(0).getBoundingClientRect().top-t.ORIGIN.top))/n.height();var d=0>l?0:l>1?1:l;r.snap&&d<r.snapTolerance?d=0:r.snap&&d>1-r.snapTolerance&&(d=1),r.snap&&d>.5-r.snapTolerance&&d<.5+r.snapTolerance&&(d=.5),s.css("top",d*n.height()+"px"),n.hasClass("jQWCP-wRed")&&this.setRgb(1-d,a.g,a.b),n.hasClass("jQWCP-wGreen")&&this.setRgb(a.r,1-d,a.b),n.hasClass("jQWCP-wBlue")&&this.setRgb(a.r,a.g,1-d),n.hasClass("jQWCP-wHue")&&this.setHsv(d,a.s,a.v),n.hasClass("jQWCP-wSat")&&this.setHsv(a.h,1-d,a.v),n.hasClass("jQWCP-wVal")&&this.setHsv(a.h,a.s,1-d),n.hasClass("jQWCP-wAlpha")&&this.setAlpha(1-d)}}},t.ColorPicker.prototype.getColor=function(){return this.color},t.ColorPicker.prototype.getValue=function(e){var i=this.options;return null==e&&(e=i.format),i.rounding>=0&&(this.color.a=Math.round(this.color.a*Math.pow(10,i.rounding))/Math.pow(10,i.rounding)),t.colorToStr(this.color,e)},t.ColorPicker.prototype.setValue=function(e,i){var n=t.strToColor(e);return n?this.setColor(n,i):this},t.ColorPicker.prototype.setColor=function(e,t){return"string"==typeof e?this.setValue(e,t):null!=e.r?this.setRgba(e.r,e.g,e.b,e.a,t):null!=e.h?this.setHsva(e.h,e.s,e.v,e.a,t):null!=e.a?this.setAlpha(e.a,t):this},t.ColorPicker.prototype.setRgba=function(e,i,n,r,a){void 0===a&&(a=!0);var s=this.color;s.r=e,s.g=i,s.b=n,null!=r&&(s.a=r);var o=t.rgbToHsv(e,i,n);return s.h=o.h,s.s=o.s,s.v=o.v,this.updateSliders(),this.redrawSliders(),a&&this.updateInput(),this},t.ColorPicker.prototype.setRgb=function(e,t,i,n){return this.setRgba(e,t,i,null,n)},t.ColorPicker.prototype.setHsva=function(e,i,n,r,a){void 0===a&&(a=!0);var s=this.color;s.h=e,s.s=i,s.v=n,null!=r&&(s.a=r);var o=t.hsvToRgb(e,i,n);return s.r=o.r,s.g=o.g,s.b=o.b,this.updateSliders(),this.redrawSliders(),a&&this.updateInput(),this},t.ColorPicker.prototype.setHsv=function(e,t,i,n){return this.setHsva(e,t,i,null,n)},t.ColorPicker.prototype.setAlpha=function(e,t){return void 0===t&&(t=!0),this.color.a=e,this.updateSliders(),this.redrawSliders(),t&&this.updateInput(),this},t.ColorPicker.prototype.show=function(){var i=this.input,n=e(i),r=e(this.widget),a=this.options;if("popup"==a.layout&&(r.data("jQWCP.instance",this),r.stop(!0,!0),r.css({top:i.getBoundingClientRect().top-t.ORIGIN.top+n.outerHeight()+"px",left:i.getBoundingClientRect().left-t.ORIGIN.left+"px"}),this.refreshWidget(),this.redrawSliders(),this.updateSliders(),this.lastValue=i.value,r.fadeIn(a.animDuration),a.hideKeyboard&&(n.blur(),e(t.ColorPicker.overlay).show()),r.hasClass("jQWCP-mobile"))){var s=e("html").scrollTop(),o=i.getBoundingClientRect().top-t.ORIGIN.top;s>o?e("html").animate({scrollTop:o}):o+n.outerHeight()>s+window.innerHeight-r.outerHeight()&&e("html").animate({scrollTop:o+n.outerHeight()-window.innerHeight+r.outerHeight()})}},t.ColorPicker.prototype.hide=function(){var i=e(this.widget);this==i.data("jQWCP.instance")&&(i.fadeOut(this.options.animDuration),e(t.ColorPicker.overlay).hide())},t.Handler={},t.Handler.input_focus_popup=function(t){var i=e(this).data("jQWCP.instance");i.show(),null==e(this).attr("readonly")&&(e(this).attr("readonly",!0),setTimeout(function(){e(i.input).removeAttr("readonly")}),null!=navigator.userAgent.match(/Android .* Firefox/)&&setTimeout(function(){e(i.input).attr("readonly",!0),e(i.input).one("blur",function(){e(i.input).removeAttr("readonly")})}))},t.Handler.input_blur_popup=function(t){var i=e(this).data("jQWCP.instance");i.options.hideKeyboard||(i.hide(),i.lastValue!=this.value&&e(this).trigger("change"))},t.Handler.input_keyup=function(i){var n=e(this).data("jQWCP.instance"),r=t.strToColor(this.value);r&&n.setColor(r,!1)},t.Handler.input_change=function(i){var n=e(this).data("jQWCP.instance"),r=t.strToColor(this.value);n.options.autoFormat&&r?n.setColor(r,!0):n.options.validate&&!r&&""!=this.value&&(this.value=n.getValue())},t.Handler.widget_focus_block=function(t){var i=e(this).data("jQWCP.instance"),n=e(i.input);i.lastValue=i.input.value,n.triggerHandler("focus")},t.Handler.widget_mousedown_popup=function(t){var i=e(this).data("jQWCP.instance"),n=e(i.input);if(n.off("focus.wheelColorPicker"),n.off("blur.wheelColorPicker"),void 0!=n.data("events"))var r=n.data("events").blur;else var r=void 0;var a={blur:[]};if(void 0!=r)for(var s=0;s<r.length;s++)a.blur.push(r[s]);n.data("jQWCP.suspendedEvents",a)},t.Handler.widget_blur_block=function(t){var i=e(this).data("jQWCP.instance"),n=e(i.input);i.lastValue!=i.input.value&&n.trigger("change"),n.triggerHandler("blur")},t.Handler.wheelCursor_mousedown=function(t){var i=e(this),n=i.closest(".jQWCP-wWidget"),r=n.data("jQWCP.instance"),a=e(r.input);e("body").data("jQWCP.activeControl",i.parent().get(0)),a.trigger("sliderdown")},t.Handler.wheel_mousedown=function(t){var i=e(this),n=i.closest(".jQWCP-wWidget"),r=n.data("jQWCP.instance"),a=e(r.input);e("body").data("jQWCP.activeControl",i.get(0)),a.trigger("sliderdown")},t.Handler.slider_mousedown=function(t){var i=e(this),n=i.closest(".jQWCP-wWidget"),r=n.data("jQWCP.instance"),a=e(r.input);e("body").data("jQWCP.activeControl",i.parent().get(0)),a.trigger("sliderdown")},t.Handler.sliderCursor_mousedown=function(t){var i=e(this),n=i.closest(".jQWCP-wWidget"),r=n.data("jQWCP.instance"),a=e(r.input);e("body").data("jQWCP.activeControl",i.parent().get(0)),a.trigger("sliderdown")},t.Handler.html_mouseup=function(i){var n=e(e("body").data("jQWCP.activeControl"));if(0!=n.length){var r=n.closest(".jQWCP-wWidget"),a=r.data("jQWCP.instance"),s=e(a.input);if("popup"==a.options.layout){a.options.hideKeyboard||s.trigger("focus.jQWCP_DONT_TRIGGER_EVENTS"),s.on("focus.wheelColorPicker",t.Handler.input_focus_popup),s.on("blur.wheelColorPicker",t.Handler.input_blur_popup);var o=s.data("jQWCP.suspendedEvents");if(void 0!=o)for(var l=o.blur,u=0;u<l.length;u++)s.on("blur"+(""==l[u].namespace?"":"."+l[u].namespace),l[u].handler)}0!=n.length&&(void 0!=i.pageX&&a.updateActiveControl(i),e("body").data("jQWCP.activeControl",null),s.trigger("sliderup"))}},t.Handler.html_mousemove=function(t){var i=e(e("body").data("jQWCP.activeControl"));if(0!=i.length){t.preventDefault();var n=i.closest(".jQWCP-wWidget"),r=n.data("jQWCP.instance"),a=e(r.input);return r.updateActiveControl(t),a.trigger("slidermove"),!1}},t.Handler.window_resize=function(t){var i=e("body .jQWCP-wWidget.jQWCP-block");i.each(function(){var t=e(this).data("jQWCP.instance");t.refreshWidget(),t.redrawSliders()})},t.Handler.overlay_click=function(i){if(null!=t.ColorPicker.widget){var n=e(t.ColorPicker.widget),r=n.data("jQWCP.instance");if(null!=r){var a=e(r.input);r.lastValue!=r.input.value&&a.trigger("change"),r.hide()}}},e(document).ready(function(){e("[data-wheelcolorpicker]").wheelColorPicker({htmlOptions:!0})}),function(){void 0!=e.browser&&e.browser.mozilla&&(e.fn.wheelColorPicker.defaults.quality=.2),e(document).ready(function(){e("body").append('<div id="jQWCP-PageOrigin" style="position: absolute; top: 0; left: 0; height: 0; width: 0;"></div>');var i=document.getElementById("jQWCP-PageOrigin").getBoundingClientRect();t.ORIGIN=i,e(window).on("scroll.jQWCP_RelativePageOriginBugFix",function(){var e=document.getElementById("jQWCP-PageOrigin").getBoundingClientRect();t.ORIGIN=e,(0!=e.left||0!=e.top)&&(t.BUG_RELATIVE_PAGE_ORIGIN=!0)})})}()}(jQuery);function JQTouchInit(){!function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){n=e;var i=e.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}}function i(e){var t=void 0;return"undefined"!=typeof e.originalEvent&&null!=e.originalEvent&&("undefined"!=typeof e.originalEvent.changedTouches&&null!=e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length>0&&(t=e.originalEvent.changedTouches[0]),("undefined"==typeof t||null==t)&&"undefined"!=typeof e.originalEvent.touches&&null!=e.originalEvent.touches&&e.originalEvent.touches.length>0&&(t=e.originalEvent.touches[0])),"undefined"==typeof t||null==t?{x:-1,y:-1}:{x:t.pageX,y:t.pageY}}if(e.support.touch="ontouchend"in document,e.support.touch){var n,r,a,s=e.ui.mouse.prototype,o=s._mouseInit,l=s._mouseDestroy,u=s._mouseDown,c=s._mouseMove,d={x:-1,y:-1};s._touchStart=function(e){var n=this;!r&&n._mouseCapture(e.originalEvent.changedTouches[0])&&(r=!0,a=!1,d=i(e),t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},s._touchMove=function(e){r&&t(e,"mousemove")},s._touchEnd=function(e){if(r){if(t(e,"mouseup"),t(e,"mouseout"),d.x>=0&&d.y>=0){var n=i(e);n.x>=0&&n.y>=0&&Math.abs(n.x-d.x)<10&&Math.abs(n.y-d.y)<10&&t(e,"click")}r=!1}},s._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)},s._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),l.call(t)},s._mouseDown=function(e){var t=this;u.call(t,e),e.isDefaultPrevented()&&n&&(n.preventDefault(),a=!0)},s._mouseMove=function(e){var t=this;c.call(t,e),e.isDefaultPrevented()&&n&&n.preventDefault()}}}(jQuery)};
